<!doctype html>
<html class="no-js" lang="">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>campingnet documentation</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="icon" type="image/x-icon" href="../images/favicon.ico">
	      <link rel="stylesheet" href="../styles/style.css">
    </head>
    <body>

        <div class="navbar navbar-default navbar-fixed-top visible-xs">
            <a href="../" class="navbar-brand">campingnet documentation</a>
            <button type="button" class="btn btn-default btn-menu ion-ios-menu" id="btn-menu"></button>
        </div>

        <div class="xs-menu menu" id="mobile-menu">
                <div id="book-search-input" role="search"><input type="text" placeholder="Type to search"></div>            <compodoc-menu></compodoc-menu>
        </div>

        <div class="container-fluid main">
           <div class="row main">
               <div class="hidden-xs menu">
                   <compodoc-menu mode="normal"></compodoc-menu>
               </div>
               <!-- START CONTENT -->
               <div class="content component">
                   <div class="content-data">




<ol class="breadcrumb">
  <li>Components</li>
  <li>confirmacionServicio</li>
</ol>

<ul class="nav nav-tabs" role="tablist">
        <li class="active">
            <a href="#info" role="tab" id="info-tab" data-toggle="tab" data-link="info">Info</a>
        </li>
        <li >
            <a href="#source" role="tab" id="source-tab" data-toggle="tab" data-link="source">Source</a>
        </li>
        <li >
            <a href="#templateData" role="tab" id="templateData-tab" data-toggle="tab" data-link="template">Template</a>
        </li>
        <li >
            <a href="#tree" role="tab" id="tree-tab" data-toggle="tab" data-link="dom-tree">DOM Tree</a>
        </li>
</ul>

<div class="tab-content">
    <div class="tab-pane fade active in" id="c-info"><p class="comment">
    <h3>File</h3>
</p>
<p class="comment">
    <code>src/app/dashboard/dashboard.component.ts</code>
</p>

    <p class="comment">
        <h3>Description</h3>
    </p>
    <p class="comment">
        <p>POPUP para confirmar eliminación de servicio (alojamiento)</p>

    </p>




<section>
    <h3>Metadata</h3>
    <table class="table table-sm table-hover">
        <tbody>











            <tr>
                <td class="col-md-3">selector</td>
                <td class="col-md-9"><code>confirmacionServicio</code></td>
            </tr>




            <tr>
                <td class="col-md-3">templateUrl</td>
                <td class="col-md-9"><code>dashboard.component.confirmacionServicio.html</code></td>
            </tr>








        </tbody>
    </table>
</section>

    <section>
    <h3 id="index">Index</h3>
    <table class="table table-sm table-bordered index-table">
        <tbody>
                <tr>
                    <td class="col-md-4">
                        <h6><b>Properties</b></h6>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <ul class="index-list">
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#data">data</a>
                            </li>
                        </ul>
                    </td>
                </tr>

                <tr>
                    <td class="col-md-4">
                        <h6><b>Methods</b></h6>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <ul class="index-list">
                            <li>
                                <a href="#cancelar">cancelar</a>
                            </li>
                            <li>
                                <a href="#confirmadoServicio">confirmadoServicio</a>
                            </li>
                        </ul>
                    </td>
                </tr>





        </tbody>
    </table>
</section>

    <section>
    <h3 id="constructor">Constructor</h3>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
<code>constructor(_popUp: MatBottomSheetRef<confirmacionServicio>, data: <a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank">any</a>, http: <a href="https://angular.io/api/common/http/HttpClient" target="_blank">HttpClient</a>)</code>
                    </td>
                </tr>
                        <tr>
                            <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="2196" class="link-to-prism">src/app/dashboard/dashboard.component.ts:2196</a></div>
                            </td>
                        </tr>

                <tr>
                    <td class="col-md-4">
                            <div class="io-description"><p>Constructor confirmacionServicio</p>
</div>
                            <div>
                                    <b>Parameters :</b>
                                    <table class="params">
                                        <thead>
                                            <tr>
                                                <td>Name</td>
                                                    <td>Type</td>
                                                <td>Optional</td>
                                            </tr>
                                        </thead>
                                        <tbody>
                                                <tr>
                                                        <td>_popUp</td>
                                                  
                                                        <td>
                                                                    <code>MatBottomSheetRef&lt;confirmacionServicio&gt;</code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                </tr>
                                                <tr>
                                                        <td>data</td>
                                                  
                                                        <td>
                                                                        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                </tr>
                                                <tr>
                                                        <td>http</td>
                                                  
                                                        <td>
                                                                        <code><a href="https://angular.io/api/common/http/HttpClient" target="_blank" >HttpClient</a></code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                </tr>
                                        </tbody>
                                    </table>
                            </div>
                    </td>
                </tr>
            </tbody>
        </table>
</section>





    <section>
    
    <h3 id="methods">
        Methods
    </h3>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="cancelar"></a>
                    <span class="name">
                        <b>
                            cancelar
                        </b>
                        <a href="#cancelar"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>cancelar()</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="2225"
                            class="link-to-prism">src/app/dashboard/dashboard.component.ts:2225</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Función para quitar el popup</p>
</div>

                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="confirmadoServicio"></a>
                    <span class="name">
                        <b>
                            confirmadoServicio
                        </b>
                        <a href="#confirmadoServicio"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>confirmadoServicio(e)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="2209"
                            class="link-to-prism">src/app/dashboard/dashboard.component.ts:2209</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Función que confirma la eliminación del servicio (alojamiento), servicio pasado por parámetro (e)</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>e</td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</section>
    <section>
    
        <h3 id="inputs">
            Properties
        </h3>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="data"></a>
                        <span class="name">
                            <b>
                                <span class="modifier">Public</span>
                            data</b>
                            <a href="#data"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Type : </i>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>

                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-4">
                            <b>Decorators : </b>
                            <br />
                            <code>
                                @Inject(MAT_BOTTOM_SHEET_DATA)<br />
                            </code>
                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="2203" class="link-to-prism">src/app/dashboard/dashboard.component.ts:2203</a></div>
                            </td>
                        </tr>


            </tbody>
        </table>
</section>

</div>


    <div class="tab-pane fade  tab-source-code" id="c-source">
        <pre class="line-numbers compodoc-sourcecode"><code class="language-typescript">import { Component, OnInit, ViewChild, ElementRef, Inject } from &#x27;@angular/core&#x27;;
import { ActivatedRoute } from &#x27;@angular/router&#x27;;
import { HttpClient, HttpParams } from &#x27;@angular/common/http&#x27;;
import { FormGroup, Validators, FormBuilder, FormControl, ValidationErrors } from &#x27;@angular/forms&#x27;;
import { Usuario } from &#x27;../usuario/usuario&#x27;;
import { MatDrawer } from &#x27;@angular/material/sidenav&#x27;;
import { BreakpointObserver, Breakpoints } from &#x27;@angular/cdk/layout&#x27;;
import { DateAdapter, MAT_DATE_FORMATS, MAT_DATE_LOCALE } from &#x27;@angular/material/core&#x27;;
import { MomentDateAdapter, MAT_MOMENT_DATE_ADAPTER_OPTIONS } from &#x27;@angular/material-moment-adapter&#x27;;
import * as moment from &#x27;moment/moment&#x27;;
import { MatBottomSheet, MatBottomSheetRef, MAT_BOTTOM_SHEET_DATA } from &#x27;@angular/material/bottom-sheet&#x27;;

import { encriptar, desencriptar } from &#x27;../crypto-storage&#x27;;
import { CommonModule } from &#x27;@angular/common&#x27;; // Prevenir errors *ngIf

/**
 * Seteo de cómo lee y muestra las fechas de los datePicker
 */
export const DD_MM_YYYY_Format &#x3D; {
  parse: {
      dateInput: &#x27;DD/MM/YYYY&#x27;,
  },
  display: {
      dateInput: &#x27;DD/MM/YYYY&#x27;,
      monthYearLabel: &#x27;MMM YYYY&#x27;,
      dateA11yLabel: &#x27;LL&#x27;,
      monthYearA11yLabel: &#x27;MMMM YYYY&#x27;,
  },
};

/**
 * Componente principal, dashboard
 */
@Component({
  selector: &#x27;app-dashboard&#x27;,
  templateUrl: &#x27;./dashboard.component.html&#x27;,
  styleUrls: [&#x27;./dashboard.component.css&#x27;],
  providers: [
    { provide: MAT_DATE_LOCALE, useValue: &#x27;es-ES&#x27; }, // Configuración Datepicker
    {
    provide: DateAdapter,
    useClass: MomentDateAdapter,
    deps: [MAT_DATE_LOCALE, MAT_MOMENT_DATE_ADAPTER_OPTIONS]
  },
  {provide: MAT_DATE_FORMATS, useValue: DD_MM_YYYY_Format}],
})
export class DashboardComponent implements OnInit {
  /**
   * Elemento con ID scrollMe (listado de servicios extras)
   */
  @ViewChild(&#x27;scrollMe&#x27;) private myScrollContainer: ElementRef;

  /**
   * Variable de pagination
   */
  public p: number &#x3D; 1;

  /**
   * Variable que indica si es un trabajador o no, si un cliente entra a la parte dashboard, no verá nada, solo el cargador y será redireccionado al Inicio
   */
  public trabajador: boolean &#x3D; false;

  /**
   * Menú lateral
   */
  @ViewChild(&#x27;menu&#x27;) drawer: MatDrawer;

  /**
   * Variables para los breakpoints de la pantalla
   */
  public pantalla: boolean &#x3D; false;
  /**
   * Variables para los breakpoints de la pantalla
   */
  public pantalla2: boolean &#x3D; false;

  /**
   * Variables del número de los cuadrados de inicio
   */
  public reservasHoy: number &#x3D; 0;
  /**
   * Variables del número de los cuadrados de inicio
   */
  public reservasHoySalidas: number &#x3D; 0;
  /**
   * Variables del número de los cuadrados de inicio
   */
  public revisarResenias: number &#x3D; 0;

  /**
   * Variable de usuario con sesión iniciada
   */
  public usuarioActual: Usuario;

  /**
   * Lista de las últimas 10 reservas
   */
  public reservasList: any &#x3D; [];

  /**
   * Variables de las rutas, control de vista
   */
  public dashboardInicio: boolean &#x3D; false;
  /**
   * Variables de las rutas, control de vista
   */
  public dashboardRevisarResenias: boolean &#x3D; false;
  /**
   * Variables de las rutas, control de vista
   */
  public dashboardSalidasHoy: boolean &#x3D; false;
  /**
   * Variables de las rutas, control de vista
   */
  public dashboardEntradasHoy: boolean &#x3D; false;
  /**
   * Variables de las rutas, control de vista
   */
  public dashboardReservas: boolean &#x3D; false;
  /**
   * Variables de las rutas, control de vista
   */
  public dashboardResenias: boolean &#x3D; false;
  /**
   * Variables de las rutas, control de vista
   */
  public dashboardUsuarios: boolean &#x3D; false;
  /**
   * Variables de las rutas, control de vista
   */
  public dashboardServicios: boolean &#x3D; false;
  /**
   * Variables de las rutas, control de vista
   */
  public dashboardAdmin: boolean &#x3D; false;
  /**
   * Variables de las rutas, control de vista
   */
  public dashboardAdminTemporadas: boolean &#x3D; false;
  /**
   * Variables de las rutas, control de vista
   */
  public dashboardAdminServicios: boolean &#x3D; false;

  /**
   * variables revisar-resenias
   */
  public listadoResenias: any &#x3D; [];
  /**
   * variables revisar-resenias
   */
  public listadoReseniasAlgo: boolean &#x3D; false;

  /**
   * Variables salidas-hoy
   */
  public listadoSalidasHoy: any &#x3D; [];
  /**
   * Variables salidas-hoy, también es usado en entradas-hoy
   */
  public serviciosExtras: any &#x3D; [];
  /**
   * Variables salidas-hoy
   */
  public totalPagar: number &#x3D; 0;
  /**
   * Variables salidas-hoy
   */
  public pago: number &#x3D; 0;

  /**
   * Variables entradas-hoy
   */
  public listadoEntradasHoy: any &#x3D; [];

  /**
   * Variables reservas
   */
  public buscarReserva: FormGroup;
  /**
   * Variables reservas
   */
  public editarReserva: FormGroup;
  /**
   * Variables reservas
   */
  public buscado: boolean &#x3D; false;
  /**
   * Variables reservas
   */
  public listadoBuscado: any &#x3D; [];
  /**
   * Variables reservas
   */
  public reservaSeleccionada: boolean &#x3D; false;
  /**
   * Variables reservas
   */
  public reservaEditar: any;
  /**
   * Variables reservas
   */
  public serviciosReservaEditar: any &#x3D; [];
  /**
   * Variables reservas
   */
  public allServices: any &#x3D; [];
  /**
   * Variables reservas
   */
  public totalPersonas: number &#x3D; 0;
  /**
   * Variables reservas
   */
  public fechaVal: boolean &#x3D; null;
  /**
   * Variables reservas
   */
  public errorEdicionReserva: boolean &#x3D; false;
  /**
   * Variables reservas
   */
  public errorFechas: boolean &#x3D; false;

  /**
   * Variables reseñas
   */
  public buscarResenia: FormGroup;
  /**
   * Variables reseñas
   */
  public reseniasList: any &#x3D; [];

  /**
   * Variables usuarios
   */
  public buscarUsuario: FormGroup;
  /**
   * Variables usuarios
   */
  public listadoUsuarios: any &#x3D; [];

  /**
   * Variables servicios
   */
  public listadoServicios: any &#x3D; [];

  /**
   * Variables admin/temporadas
   */
  public listadoTemporadas: any &#x3D; [];
  /**
   * Variables admin/temporadas
   */
  public dashboardAdminTemporadasEditar: boolean &#x3D; false;
  /**
   * Variables admin/temporadas
   */
  public edicionTemporada: FormGroup;
  /**
   * Variables admin/temporadas
   */
  public temporadaEditar: any;
  /**
   * Variables admin/temporadas
   */
  public nombreTemp: string;
  /**
   * Variables admin/temporadas
   */
  public fecha1Temp: any;
  /**
   * Variables admin/temporadas
   */
  public fecha2Temp: any;
  /**
   * Variables admin/temporadas
   */
  public multiplicativoTemp: any;
  /**
   * Variables admin/temporadas
   */
  public errorTemp: boolean &#x3D; false;
  /**
   * Variables admin/temporadas
   */
  public agregarTemporada: boolean &#x3D; false;
  /**
   * Variables admin/temporadas
   */
  public agregarTemporadas: FormGroup;

  /**
   * Variables admin/servicios
   */
  public dashboardServiciosEditar: boolean &#x3D; false;
  /**
   * Variables admin/servicios
   */
  public edicionServicios: FormGroup;
  /**
   * Variables admin/servicios
   */
  public servicioAlojamiento: boolean &#x3D; false;
  /**
   * Variables admin/servicios
   */
  public servicioEditar: any;
  /**
   * Variables admin/servicios
   */
  public errorGuardarServicio: boolean &#x3D; false;
  /**
   * Variables admin/servicios
   */
  public agregarAlojamiento: boolean &#x3D; false;
  /**
   * Variables admin/servicios
   */
  public addAlojamientoForm: FormGroup;
  /**
   * Variables admin/servicios
   */
  public errorAgregarAlojamiento: boolean &#x3D; false;
  
  /**
   * Constructor de dashboard
   * @param http 
   * @param router 
   * @param breakpointObserver 
   * @param fb 
   * @param _popUp 
   */
  constructor(private http: HttpClient, private router: ActivatedRoute, breakpointObserver: BreakpointObserver, public fb: FormBuilder, private _popUp: MatBottomSheet) {

    // Inicializar FormBuilder de buscar reservas
    this.buscarReserva &#x3D; this.fb.group({
      fechaEntrada: [&#x27;&#x27;, ],
      idReserva: [&#x27;&#x27;, ],
      dniUsuario: [&#x27;&#x27;, [Validators.pattern(&#x27;^[0-9]{8,8}[A-Za-z]$&#x27;)]],
    });

    // Inicializar FormBuilder de editar reservas
    this.editarReserva &#x3D; this.fb.group({
      fechaEntrada: [&#x27;&#x27;, [Validators.required]],
      fechaSalida: [&#x27;&#x27;, [Validators.required]],
      numePersonasAlojamiento: [&#x27;&#x27;, [Validators.required, Validators.min(0)]],
    });

    // Inicializar FormBuilder de buscar reseña
    this.buscarResenia &#x3D; this.fb.group({
      idResenia: [&#x27;&#x27;, ],
      dniUsuario: [&#x27;&#x27;, [Validators.pattern(&#x27;^[0-9]{8,8}[A-Za-z]$&#x27;)]],
      idAlojamiento: [&#x27;&#x27;, ],
    });

    // Inicializar FormBuilder de buscar usuarios
    this.buscarUsuario &#x3D; this.fb.group({
      alias_usuario: [&#x27;&#x27;, ],
      dniUsuario: [&#x27;&#x27;, [Validators.pattern(&#x27;^[0-9]{8,8}[A-Za-z]$&#x27;)]],
      email: [&#x27;&#x27;, ],
    });

    // Inicializar FormBuilder de editar temporadas
    this.edicionTemporada &#x3D; this.fb.group({
      fechaInicio: [&#x27;&#x27;, [Validators.required]],
      fechaFin: [&#x27;&#x27;, [Validators.required]],
      nombre: [&#x27;&#x27;, [Validators.required, Validators.maxLength(20)]],
      multiplicador: [&#x27;&#x27;, [Validators.required]],
    });

    // Inicializar FormBuilder de añadido de temporadas
    this.agregarTemporadas &#x3D; this.fb.group({
      fechaInicio: [&#x27;&#x27;, [Validators.required]],
      fechaFin: [&#x27;&#x27;, [Validators.required]],
      nombre: [&#x27;&#x27;, [Validators.required, Validators.maxLength(20), Validators.pattern(&#x27;^[a-zA-Z-,]+(\s{0,1}[a-zA-Z-, ])*$&#x27;)]],
      multiplicador: [&#x27;&#x27;, [Validators.required, Validators.max(2)]],
    });

    // Inicializar FormBuilder de editar de servicios
    this.edicionServicios &#x3D; this.fb.group({
      nombre: [&#x27;&#x27;, [Validators.required]],
      precio: [&#x27;&#x27;, [Validators.required]],
      idServicio: [&#x27;&#x27;,],
      idAlojamiento: [&#x27;&#x27;,]
    });

    this.addAlojamientoForm &#x3D; this.fb.group({
      tipo: [&#x27;&#x27;, [Validators.required]],
      sombra: [&#x27;&#x27;],
      dimension: [&#x27;&#x27;],
      habitaciones: [&#x27;&#x27;],
      maximo_personas: [&#x27;&#x27;],
      nombre: [&#x27;&#x27;, [Validators.required]],
      precio: [&#x27;&#x27;, [Validators.required]],
    });

    /**
     * Obtiene el tamaño de la pantalla
     */
    breakpointObserver.observe([
      Breakpoints.HandsetLandscape,
      Breakpoints.HandsetPortrait
    ]).subscribe(res &#x3D;&gt; {
      const md &#x3D; breakpointObserver.isMatched(&#x27;(max-width: 768px)&#x27;);
      const sm &#x3D; breakpointObserver.isMatched(&#x27;(max-width: 575px)&#x27;);
      this.pantalla &#x3D; md;
      this.pantalla2 &#x3D; sm;
    })
  }

  /**
   * Abre popup para confirmar la eliminación de la temporada
   * @param nombre 
   */
  openBottomSheet(nombre): void {
    this._popUp.open(confirmacion, {data: {nombre}});
  }

  /**
   * Abre popup para confirmar la eliminación de la reserva
   * @param reserva 
   */
  openBottomSheet2(reserva): void {
    this._popUp.open(confirmacionReserva, {data: {reserva}});
  }

  /**
   * Abre popup para confirmar la eliminación del servicio
   * @param servicio 
   */
  openBottomSheet3(servicio): void {
    this._popUp.open(confirmacionServicio, {data: {servicio}});
  }

  /**
   * Función para la paginación, está modificada para que en la paginación de aprobar reseñas cambie de página si en la página actual no hay reseñas que aprobar
   * @param $event 
   * @param lista 
   */
  onChangePage($event, lista?) {
    if (lista) {
      if ($event*10 &gt; lista.length) {
        this.p -&#x3D; 1;
      }else{
        this.p &#x3D; $event
      }
    }else{
      this.p &#x3D; $event
    }
  }

  /**
   * Función para cerrar o abrir el menú lateral
   */
  togle() {
    if(this.drawer.opened){
      this.drawer.close();
    }else{
      this.drawer.open();
    }
  }

  /**
   * Función para cerrar sesión
   */
  logOff() {
    localStorage.removeItem(&quot;usuarioActual&quot;);
    window.location.reload();
  }

  /**
   * Función para aprobar la reseña
   * @param idResenia 
   */
  aprobado(idResenia) {
    let aprobado &#x3D; new HttpParams()
    .set(&#x27;opcion&#x27;, &#x27;8&#x27;)
    .set(&#x27;idResenia&#x27;, idResenia);
    this.http.post&lt;any&gt;(&quot;http://34.206.59.221/dashboard.php&quot;, aprobado).subscribe(data &#x3D;&gt;{
      if(data !&#x3D; null){
        if (data &#x3D;&#x3D; 1){
          for (let x &#x3D; 0; x &lt; this.listadoResenias.length; x++) {
            const element &#x3D; this.listadoResenias[x];
            if(element[&#x27;idResenia&#x27;] &#x3D;&#x3D; idResenia){
              this.listadoResenias.splice(x, 1, );
            }
          }
          this.onChangePage(this.p, this.listadoResenias);
          if(this.listadoResenias.length &#x3D;&#x3D; 0){
            this.listadoReseniasAlgo &#x3D; true;
          }
        }
      }
    });
  }

  /**
   * Función para denegar la reseña
   * @param idResenia 
   */
  denegado(idResenia) {
    let denegado &#x3D; new HttpParams()
    .set(&#x27;opcion&#x27;, &#x27;9&#x27;)
    .set(&#x27;idResenia&#x27;, idResenia);
    this.http.post&lt;any&gt;(&quot;http://34.206.59.221/dashboard.php&quot;, denegado).subscribe(data &#x3D;&gt;{
      if(data !&#x3D; null){
        for (let x &#x3D; 0; x &lt; this.listadoResenias.length; x++) {
          const element &#x3D; this.listadoResenias[x];
          if(element[&#x27;idResenia&#x27;] &#x3D;&#x3D; idResenia){
            this.listadoResenias.splice(x, 1, );
          }
        }
        this.onChangePage(this.p, this.listadoResenias);
        if(this.listadoResenias.length &#x3D;&#x3D; 0){
          this.listadoReseniasAlgo &#x3D; true;
        }
      }
    });
  }

  /**
   * Función para el scroll de la lista de servicios de las reservas, para que empiece la lista desde arriba
   */
  scrollToBottom(): void {
    try {
      this.myScrollContainer.nativeElement.scrollTop(this.myScrollContainer.nativeElement.scrollHeight);
    } catch(err) { }                 
  }

  /**
   * Función para el listado de servicios extras en las reservas, llama a la función scrollToBottom()
   */
  ngAfterViewChecked() {
    this.scrollToBottom();
  }

  /**
   * Función que busca las reservas por fecha, ID de la reserva o por el DNI del cliente
   */
  buscarReservas() {
    let fecha: any &#x3D; &#x27;0&#x27;;
    let idReserva: any &#x3D; &#x27;0&#x27;;
    let dni: any &#x3D; &#x27;0&#x27;;

    if (this.buscarReserva.get(&#x27;fechaEntrada&#x27;).value !&#x3D; null &amp;&amp; this.buscarReserva.get(&#x27;fechaEntrada&#x27;).value !&#x3D; &#x27;&#x27; &amp;&amp; !this.buscarReserva.get(&#x27;fechaEntrada&#x27;).errors) {
      fecha &#x3D; (this.buscarReserva.get(&#x27;fechaEntrada&#x27;).value).format(&#x27;YYYY-MM-DD&#x27;)
    }

    if (this.buscarReserva.get(&#x27;idReserva&#x27;).value !&#x3D; null &amp;&amp; this.buscarReserva.get(&#x27;idReserva&#x27;).value !&#x3D; &#x27;&#x27; &amp;&amp; this.buscarReserva.get(&#x27;idReserva&#x27;).value !&#x3D; 0) {
      idReserva &#x3D; this.buscarReserva.get(&#x27;idReserva&#x27;).value;
    }

    if (this.buscarReserva.get(&#x27;dniUsuario&#x27;).value !&#x3D; null &amp;&amp; this.buscarReserva.get(&#x27;dniUsuario&#x27;).value !&#x3D; &#x27;&#x27; &amp;&amp; this.buscarReserva.get(&#x27;dniUsuario&#x27;).value !&#x3D; 0 &amp;&amp; !this.buscarReserva.get(&#x27;dniUsuario&#x27;).hasError(&#x27;pattern&#x27;)) {
      dni &#x3D; (this.buscarResenia.get(&#x27;dniUsuario&#x27;).value).slice(0,8)+(this.buscarResenia.get(&#x27;dniUsuario&#x27;).value).charAt(8).toUpperCase();
    }

    let params &#x3D; new HttpParams()
    .set(&#x27;opcion&#x27;, &#x27;16&#x27;)
    .set(&#x27;fechaEntrada&#x27;, fecha)
    .set(&#x27;idReserva&#x27;, idReserva)
    .set(&#x27;dni&#x27;, dni);
    this.http.post&lt;any&gt;(&quot;http://34.206.59.221/dashboard.php&quot;, params).subscribe(data &#x3D;&gt; {
      this.buscado &#x3D; true;
      if (data !&#x3D; null &amp;&amp; data !&#x3D; 0) {
        this.listadoBuscado &#x3D; data;
        for (let i &#x3D; 0; i &lt; this.listadoBuscado.length; i++) {
          const element &#x3D; this.listadoBuscado[i];
          this.serviciosExtras &#x3D; [];

          let nombreUser &#x3D; new HttpParams()
          .set(&#x27;opcion&#x27;, &#x27;6&#x27;)
          .set(&#x27;idUsuario&#x27;, element[&#x27;idUsuario&#x27;]);
          this.http.post &lt; any &gt; (&quot;http://34.206.59.221/dashboard.php&quot;, nombreUser).subscribe(data &#x3D;&gt; { // Obtener los datos del cliente
            if (data !&#x3D; null &amp;&amp; data !&#x3D; 0) {
              this.listadoBuscado[i].alias_usuario &#x3D; data[0][&#x27;alias_usuario&#x27;];
              this.listadoBuscado[i].nif &#x3D; data[0][&#x27;nif_usuario&#x27;];
              this.listadoBuscado[i].nombre_usuario &#x3D; data[0][&#x27;nombre_usuario&#x27;];
              this.listadoBuscado[i].telefono &#x3D; data[0][&#x27;telefono&#x27;];
              this.listadoBuscado[i].email &#x3D; data[0][&#x27;email&#x27;];
              this.listadoBuscado[i].fecha_entrada &#x3D; new Date(this.listadoBuscado[i].fecha_entrada).toLocaleDateString(&quot;es-ES&quot;,{year: &quot;numeric&quot;, month:&quot;2-digit&quot;, day: &quot;2-digit&quot;});
              this.listadoBuscado[i].fecha_salida &#x3D; new Date(this.listadoBuscado[i].fecha_salida).toLocaleDateString(&quot;es-ES&quot;,{year: &quot;numeric&quot;, month:&quot;2-digit&quot;, day: &quot;2-digit&quot;});
            }
          });

          let idAlojamientoSalidasHoy &#x3D; new HttpParams()
          .set(&#x27;opcion&#x27;, &#x27;11&#x27;)
          .set(&#x27;idReserva&#x27;, element[&#x27;idReserva&#x27;]);
          this.http.post &lt; any &gt; (&quot;http://34.206.59.221/dashboard.php&quot;, idAlojamientoSalidasHoy).subscribe(data &#x3D;&gt; { // Obtener los datos de los alojamientos de la reserva
            if (data !&#x3D; null &amp;&amp; data !&#x3D; 0) {
              this.listadoBuscado[i].tipo_alojamiento &#x3D; data[0][&#x27;nombre&#x27;];
              this.listadoBuscado[i].idAlojamiento &#x3D; data[0][&#x27;idAlojamiento&#x27;];
              this.listadoBuscado[i].precioAlojamiento &#x3D; data[0][&#x27;precio&#x27;];

              let numeAlojamiento &#x3D; new HttpParams()
              .set(&#x27;opcion&#x27;, &#x27;12&#x27;)
              .set(&#x27;idAlojamiento&#x27;, data[0][&#x27;idAlojamiento&#x27;]);
              this.http.post &lt; any &gt; (&quot;http://34.206.59.221/dashboard.php&quot;, numeAlojamiento).subscribe(data &#x3D;&gt; { // Obtener el número del alojamiento
                if (data !&#x3D; null &amp;&amp; data !&#x3D; 0) {
                  this.listadoBuscado[i].numeroAlojamiento &#x3D; data[0][&#x27;numeroAlojamiento&#x27;];
                  if(data[0][&#x27;tipo&#x27;] &#x3D;&#x3D; &#x27;bungalow&#x27;){
                    this.listadoBuscado[i].habitaciones &#x3D; data[0][&#x27;habitaciones&#x27;];
                    this.listadoBuscado[i].maximo_personas &#x3D; data[0][&#x27;maximo_personas&#x27;];
                  }else{
                    this.listadoBuscado[i].dimension &#x3D; data[0][&#x27;dimension&#x27;];
                    switch (data[0][&#x27;sombra&#x27;]) {
                      case &#x27;0&#x27;:
                        this.listadoBuscado[i].sombra &#x3D; &quot;Nada&quot;;
                        break;
                      case &#x27;1&#x27;:
                        this.listadoBuscado[i].sombra &#x3D; &quot;Media&quot;;
                        break;

                      case &#x27;2&#x27;:
                        this.listadoBuscado[i].sombra &#x3D; &quot;Bastante&quot;;
                        break;

                      case &#x27;3&#x27;:
                        this.listadoBuscado[i].sombra &#x3D; &#x27;Mucha&#x27;;
                        break;

                      default:
                        this.listadoBuscado[i].sombra &#x3D; &quot;Desconocido&quot;;
                        break;
                    }
                  }
                }
              });
            }
          });

          let servicios &#x3D; new HttpParams()
          .set(&#x27;opcion&#x27;, &#x27;13&#x27;)
          .set(&#x27;idReserva&#x27;, element[&#x27;idReserva&#x27;]);
          this.http.post&lt;any&gt;(&quot;http://34.206.59.221/dashboard.php&quot;, servicios).subscribe(data &#x3D;&gt; { // Obtener los datos de los servicios contratados
            if (data !&#x3D; null &amp;&amp; data !&#x3D; 0) {
              for (let i &#x3D; 0; i &lt; data.length; i++) {
                const element &#x3D; data[i];
                delete element.idAlojamiento;
                this.serviciosExtras.push(element);
              }
              this.serviciosExtras.idReserva &#x3D; element[&#x27;idReserva&#x27;];
            }
          });
        }
      }
    });
  }

  /**
   * Función que busca las reseñas por ID de la reseña, DNI del cliente o ID del alojamiento
   */
  buscarResenias() {

    let idResenia: any &#x3D; &#x27;0&#x27;;
    let dni: any &#x3D; &#x27;0&#x27;;
    let idAlojamiento: any &#x3D; &#x27;0&#x27;;

    if (this.buscarResenia.get(&#x27;idResenia&#x27;).value !&#x3D; null &amp;&amp; this.buscarResenia.get(&#x27;idResenia&#x27;).value !&#x3D; &#x27;&#x27; &amp;&amp; this.buscarResenia.get(&#x27;idResenia&#x27;).value !&#x3D; 0) {
      idResenia &#x3D; this.buscarResenia.get(&#x27;idResenia&#x27;).value;
    }

    if (this.buscarResenia.get(&#x27;dniUsuario&#x27;).value !&#x3D; null &amp;&amp; this.buscarResenia.get(&#x27;dniUsuario&#x27;).value !&#x3D; &#x27;&#x27; &amp;&amp; this.buscarResenia.get(&#x27;dniUsuario&#x27;).value !&#x3D; 0 &amp;&amp; !this.buscarReserva.get(&#x27;dniUsuario&#x27;).hasError(&#x27;pattern&#x27;)) {
      dni &#x3D; (this.buscarResenia.get(&#x27;dniUsuario&#x27;).value).slice(0,8)+(this.buscarResenia.get(&#x27;dniUsuario&#x27;).value).charAt(8).toUpperCase();
    }

    if (this.buscarResenia.get(&#x27;idAlojamiento&#x27;).value !&#x3D; null &amp;&amp; this.buscarResenia.get(&#x27;idAlojamiento&#x27;).value !&#x3D; &#x27;&#x27;) {
      idAlojamiento &#x3D; this.buscarResenia.get(&#x27;idAlojamiento&#x27;).value;
    }

    let params &#x3D; new HttpParams()
    .set(&#x27;opcion&#x27;, &#x27;18&#x27;)
    .set(&#x27;idResenia&#x27;, idResenia)
    .set(&#x27;dniUsuario&#x27;, dni)
    .set(&#x27;idAlojamiento&#x27;, idAlojamiento);
    this.http.post&lt;any&gt;(&quot;http://34.206.59.221/dashboard.php&quot;, params).subscribe(data &#x3D;&gt; {
      this.buscado &#x3D; true;
      if (data !&#x3D; null &amp;&amp; data !&#x3D; 0) {
        this.listadoBuscado &#x3D; data;
        for (let i &#x3D; 0; i &lt; this.listadoBuscado.length; i++) {
          const element &#x3D; this.listadoBuscado[i];
          this.serviciosExtras &#x3D; [];

          let nombreUser &#x3D; new HttpParams()
          .set(&#x27;opcion&#x27;, &#x27;6&#x27;)
          .set(&#x27;idUsuario&#x27;, element[&#x27;idUsuario&#x27;]);
          this.http.post &lt; any &gt; (&quot;http://34.206.59.221/dashboard.php&quot;, nombreUser).subscribe(data &#x3D;&gt; { // Obtener los datos del cliente
            if (data !&#x3D; null &amp;&amp; data !&#x3D; 0) {
              this.listadoBuscado[i].alias_usuario &#x3D; data[0][&#x27;alias_usuario&#x27;];
              this.listadoBuscado[i].nif &#x3D; data[0][&#x27;nif_usuario&#x27;];
              this.listadoBuscado[i].nombre_usuario &#x3D; data[0][&#x27;nombre_usuario&#x27;];
              this.listadoBuscado[i].telefono &#x3D; data[0][&#x27;telefono&#x27;];
              this.listadoBuscado[i].email &#x3D; data[0][&#x27;email&#x27;];
            }
          });

          let userResenia &#x3D; new HttpParams()
          .set(&#x27;opcion&#x27;, &#x27;19&#x27;)
          .set(&#x27;idResenia&#x27;, element[&#x27;idResenia&#x27;]);
          this.http.post &lt; any &gt; (&quot;http://34.206.59.221/dashboard.php&quot;, userResenia).subscribe(data &#x3D;&gt; { // Obtener los datos del cliente
            if (data !&#x3D; null &amp;&amp; data !&#x3D; 0) {
              this.listadoBuscado[i].tipo_alojamiento &#x3D; data[0][&#x27;tipo&#x27;].charAt(0).toUpperCase()+data[0][&#x27;tipo&#x27;].slice(1);
              this.listadoBuscado[i].idAlojamiento &#x3D; data[0][&#x27;idAlojamiento&#x27;];
              this.listadoBuscado[i].numeroAlojamiento &#x3D; data[0][&#x27;numeroAlojamiento&#x27;];
              if(data[0][&#x27;tipo&#x27;] &#x3D;&#x3D; &#x27;bungalow&#x27;){
                this.listadoBuscado[i].habitaciones &#x3D; data[0][&#x27;habitaciones&#x27;];
                this.listadoBuscado[i].maximo_personas &#x3D; data[0][&#x27;maximo_personas&#x27;];
              }else{
                this.listadoBuscado[i].dimension &#x3D; data[0][&#x27;dimension&#x27;];
                switch (data[0][&#x27;sombra&#x27;]) {
                  case &#x27;0&#x27;:
                    this.listadoBuscado[i].sombra &#x3D; &quot;Nada&quot;;
                    break;
                  case &#x27;1&#x27;:
                    this.listadoBuscado[i].sombra &#x3D; &quot;Media&quot;;
                    break;

                  case &#x27;2&#x27;:
                    this.listadoBuscado[i].sombra &#x3D; &quot;Bastante&quot;;
                    break;

                  case &#x27;3&#x27;:
                    this.listadoBuscado[i].sombra &#x3D; &#x27;Mucha&#x27;;
                    break;

                  default:
                    this.listadoBuscado[i].sombra &#x3D; &quot;Desconocido&quot;;
                    break;
                }
              }
            }
          });
        }
      }
    });
  }

  /**
   * Función que busca usuarios por el alias del usuario, el DNI o el email
   */
  buscarUsuarios() {
    let alias: any &#x3D; &#x27;0&#x27;;
    let dni: any &#x3D; &#x27;0&#x27;;
    let email: any &#x3D; &#x27;0&#x27;;

    if (this.buscarUsuario.get(&#x27;alias_usuario&#x27;).value !&#x3D; null &amp;&amp; this.buscarUsuario.get(&#x27;alias_usuario&#x27;).value !&#x3D; &#x27;&#x27; &amp;&amp; this.buscarUsuario.get(&#x27;alias_usuario&#x27;).value !&#x3D; 0) {
      alias &#x3D; this.buscarUsuario.get(&#x27;alias_usuario&#x27;).value;
    }
    if (this.buscarUsuario.get(&#x27;dniUsuario&#x27;).value !&#x3D; null &amp;&amp; this.buscarUsuario.get(&#x27;dniUsuario&#x27;).value !&#x3D; &#x27;&#x27; &amp;&amp; this.buscarUsuario.get(&#x27;dniUsuario&#x27;).value !&#x3D; 0 &amp;&amp; !this.buscarReserva.get(&#x27;dniUsuario&#x27;).hasError(&#x27;pattern&#x27;)) {
      dni &#x3D; (this.buscarUsuario.get(&#x27;dniUsuario&#x27;).value).slice(0,8)+(this.buscarUsuario.get(&#x27;dniUsuario&#x27;).value).charAt(8).toUpperCase();
    }
    if (this.buscarUsuario.get(&#x27;email&#x27;).value !&#x3D; null &amp;&amp; this.buscarUsuario.get(&#x27;email&#x27;).value !&#x3D; &#x27;&#x27;) {
      email &#x3D; this.buscarUsuario.get(&#x27;email&#x27;).value;
    }

    let params &#x3D; new HttpParams()
    .set(&#x27;opcion&#x27;, &#x27;21&#x27;)
    .set(&#x27;alias&#x27;, alias)
    .set(&#x27;dniUsuario&#x27;, dni)
    .set(&#x27;email&#x27;, email);
    this.http.post&lt;any&gt;(&quot;http://34.206.59.221/dashboard.php&quot;, params).subscribe(data &#x3D;&gt; {
      this.buscado &#x3D; true;
      if (data !&#x3D; null &amp;&amp; data !&#x3D; 0) {
        this.listadoBuscado &#x3D; data;
      }
    });
  }

  /**
   * Función del botón atrás de reservas (parte de búsqueda)
   */
  atrasBusqueda() {
    this.listadoBuscado &#x3D; [];
    this.buscado &#x3D; false;
    this.reservaSeleccionada &#x3D; false;
    if (this.router.snapshot.url.length &gt; 1 &amp;&amp; this.router.snapshot.url[0].path &#x3D;&#x3D; &#x27;dashboard&#x27; &amp;&amp; this.router.snapshot.url[1].path &#x3D;&#x3D; &#x27;reservas&#x27;) {
      this.buscarReserva.get(&#x27;fechaEntrada&#x27;).setValue(&#x27;&#x27;);
      this.buscarReserva.get(&#x27;idReserva&#x27;).setValue(&#x27;&#x27;);
      this.buscarReserva.get(&#x27;dniUsuario&#x27;).setValue(&#x27;&#x27;);
    }else if (this.router.snapshot.url.length &gt; 1 &amp;&amp; this.router.snapshot.url[0].path &#x3D;&#x3D; &#x27;dashboard&#x27; &amp;&amp; this.router.snapshot.url[1].path &#x3D;&#x3D; &#x27;resenias&#x27;) {
      this.buscarResenia.get(&#x27;idResenia&#x27;).setValue(&#x27;&#x27;);
      this.buscarResenia.get(&#x27;dniUsuario&#x27;).setValue(&#x27;&#x27;);
      this.buscarResenia.get(&#x27;idAlojamiento&#x27;).setValue(&#x27;&#x27;);
    }else if (this.router.snapshot.url.length &gt; 1 &amp;&amp; this.router.snapshot.url[0].path &#x3D;&#x3D; &#x27;dashboard&#x27; &amp;&amp; this.router.snapshot.url[1].path &#x3D;&#x3D; &#x27;usuarios&#x27;) {
      this.buscarUsuario.get(&#x27;alias_usuario&#x27;).setValue(&#x27;&#x27;);
      this.buscarUsuario.get(&#x27;dniUsuario&#x27;).setValue(&#x27;&#x27;);
      this.buscarUsuario.get(&#x27;email&#x27;).setValue(&#x27;&#x27;);
    }else if (this.router.snapshot.url.length &gt; 1 &amp;&amp; this.router.snapshot.url[0].path &#x3D;&#x3D; &#x27;dashboard&#x27; &amp;&amp; this.router.snapshot.url[1].path &#x3D;&#x3D; &#x27;admin&#x27; &amp;&amp; this.router.snapshot.url[2].path &#x3D;&#x3D; &#x27;temporadas&#x27; &amp;&amp; this.agregarTemporada &#x3D;&#x3D; true) {
      this.agregarTemporada &#x3D; false;
    }else if (this.router.snapshot.url.length &gt; 1 &amp;&amp; this.router.snapshot.url[0].path &#x3D;&#x3D; &#x27;dashboard&#x27; &amp;&amp; this.router.snapshot.url[1].path &#x3D;&#x3D; &#x27;admin&#x27; &amp;&amp; this.router.snapshot.url[2].path &#x3D;&#x3D; &#x27;temporadas&#x27;) {
      this.dashboardAdminTemporadasEditar &#x3D; false;
      this.agregarTemporada &#x3D; false;
    }else if (this.router.snapshot.url.length &gt; 1 &amp;&amp; this.router.snapshot.url[0].path &#x3D;&#x3D; &#x27;dashboard&#x27; &amp;&amp; this.router.snapshot.url[1].path &#x3D;&#x3D; &#x27;admin&#x27; &amp;&amp; this.router.snapshot.url[2].path &#x3D;&#x3D; &#x27;servicios&#x27; &amp;&amp; this.dashboardServiciosEditar &#x3D;&#x3D; true) {
      this.dashboardServiciosEditar &#x3D; false;
      this.agregarAlojamiento &#x3D; false;
      this.edicionServicios.reset();
      this.addAlojamientoForm.get(&#x27;tipo&#x27;).setValue(&#x27;&#x27;);
      this.addAlojamientoForm.get(&#x27;nombre&#x27;).setValue(&#x27;&#x27;);
      this.addAlojamientoForm.get(&#x27;precio&#x27;).setValue(&#x27;&#x27;);
      this.addAlojamientoForm.get(&#x27;sombra&#x27;).setValue(&#x27;&#x27;);
      this.addAlojamientoForm.get(&#x27;dimension&#x27;).setValue(&#x27;&#x27;);
      this.addAlojamientoForm.get(&#x27;habitaciones&#x27;).setValue(&#x27;&#x27;);
      this.addAlojamientoForm.get(&#x27;maximo_personas&#x27;).setValue(&#x27;&#x27;);
    }
  }

  /**
   * Función para editar la reserva, como parámetro se le pasa la reserva (r)
   * @param r 
   */
  editar(r) {
    this.reservaEditar &#x3D; null;
    this.serviciosReservaEditar &#x3D; [];
    this.allServices &#x3D; [];
    this.reservaEditar &#x3D; r;
    this.editarReserva.reset();

    // Seteo de fechas por defecto
    let fecha1 &#x3D; this.reservaEditar.fecha_entrada.split(&#x27;/&#x27;);
    let fecha2 &#x3D; this.reservaEditar.fecha_salida.split(&#x27;/&#x27;);

    this.editarReserva.get(&#x27;fechaEntrada&#x27;).setValue(new Date(fecha1[2], fecha1[1]-1, fecha1[0]));
    this.editarReserva.get(&#x27;fechaSalida&#x27;).setValue(new Date(fecha2[2], fecha2[1]-1, fecha2[0]));

    // Obtención de todos los servicios de la reserva y sus cantidades
    let servicios &#x3D; new HttpParams()
    .set(&#x27;opcion&#x27;, &#x27;13&#x27;)
    .set(&#x27;idReserva&#x27;, r.idReserva);
    this.http.post&lt;any&gt;(&quot;http://34.206.59.221/dashboard.php&quot;, servicios).subscribe(data &#x3D;&gt; {
      if(data !&#x3D; null &amp;&amp; data !&#x3D; 0) {
        this.serviciosReservaEditar &#x3D; data;
        let cantidades &#x3D; new HttpParams()
        .set(&#x27;opcion&#x27;, &#x27;14&#x27;)
        .set(&#x27;idReserva&#x27;, r.idReserva);
        this.http.post&lt;any&gt;(&quot;http://34.206.59.221/dashboard.php&quot;, cantidades).subscribe(data &#x3D;&gt; {
          if(data !&#x3D; null &amp;&amp; data !&#x3D; 0) {
            for (let i &#x3D; 0; i &lt; this.serviciosReservaEditar.length; i++) {
              const element &#x3D; this.serviciosReservaEditar[i];
              for (let x &#x3D; 0; x &lt; data.length; x++) {
                const elemento &#x3D; data[x];
                if(element.idServicio &#x3D;&#x3D; elemento.idServicio) {
                  this.serviciosReservaEditar[i].cantidad &#x3D; elemento.cantidad;
                }
              }
            }
          }

          let todosServicios &#x3D; new HttpParams()
          .set(&#x27;opcion&#x27;, &#x27;22&#x27;);
          this.http.post&lt;any&gt;(&quot;http://34.206.59.221/dashboard.php&quot;, todosServicios).subscribe(data &#x3D;&gt; {
            if(data !&#x3D; null &amp;&amp; data !&#x3D; 0) {
              for (let k &#x3D; 0; k &lt; data.length; k++) {
                const element &#x3D; data[k];
                if(element.idAlojamiento &#x3D;&#x3D; null) {
                  this.allServices.push(element);
                }
              }
              for (let z &#x3D; 0; z &lt; this.serviciosReservaEditar.length; z++) {
                const element &#x3D; this.serviciosReservaEditar[z];
                for (let j &#x3D; 0; j &lt; this.allServices.length; j++) {
                  const elemento &#x3D; this.allServices[j];
                  this.editarReserva.addControl(&#x27;servicio&#x27;+this.allServices[j][&#x27;idServicio&#x27;], new FormControl(false,[]));
                  this.editarReserva.addControl(&#x27;num&#x27;+this.allServices[j][&#x27;idServicio&#x27;], new FormControl({value: &#x27;&#x27;, disabled: true},[]));
                  if(element.idServicio &#x3D;&#x3D; elemento.idServicio) {
                    this.allServices[j].cantidad &#x3D; element.cantidad;
                    this.editarReserva.get(&#x27;servicio&#x27;+this.allServices[j][&#x27;idServicio&#x27;]).setValue(true);
                    this.editarReserva.get(&#x27;num&#x27;+this.allServices[j][&#x27;idServicio&#x27;]).enable();
                    this.editarReserva.get(&#x27;num&#x27;+this.allServices[j][&#x27;idServicio&#x27;]).setValue(element.cantidad);
                    if(element.idServicio &#x3D;&#x3D; 2 || element.idServicio &#x3D;&#x3D; 3 || element.idServicio &#x3D;&#x3D; 4) {
                      this.editarReserva.get(&#x27;numePersonasAlojamiento&#x27;).setValue(2);
                    }if(this.reservaEditar.tipo_alojamiento &#x3D;&#x3D; &#x27;Parcela&#x27;) {
                      if(this.reservaEditar.num_personas &lt; 3) {
                        this.editarReserva.get(&#x27;numePersonasAlojamiento&#x27;).setValue(this.reservaEditar.num_personas);
                      }
                    }
                  }
                }
              }
            }
          });
        });
      }
    });

    if(this.reservaEditar.tipo_alojamiento &#x3D;&#x3D; &#x27;Parcela&#x27;) {
      this.editarReserva.setValidators([this.validacionFecha(),this.maximoPersonas()]);
    }else{
      this.editarReserva.setValidators([this.validacionFecha()]);
    }
    this.reservaSeleccionada &#x3D; true;
  }

  /**
   * Función para la validación de las fechas, Validators de un FormBuilder, controla las fechas
   */
  validacionFecha(){
    return (): ValidationErrors &#x3D;&gt; {
      if(this.editarReserva.get(&#x27;fechaSalida&#x27;).value !&#x3D; &#x27;&#x27;){
        this.editarReserva.get(&#x27;fechaSalida&#x27;).setErrors(null);
        this.fechaVal &#x3D; false;
        let diff &#x3D; Math.floor((new Date(this.editarReserva.get(&#x27;fechaSalida&#x27;).value).getTime() - new Date(this.editarReserva.get(&#x27;fechaEntrada&#x27;).value).getTime())/86400000);
        if (diff &lt;&#x3D; 0) {
          this.editarReserva.get(&#x27;fechaSalida&#x27;).setErrors({fecha2Mayor: true});
        }else if(diff &gt; 0){
          this.editarReserva.get(&#x27;fechaSalida&#x27;).setErrors(null);
        } 
      }else{
        this.editarReserva.get(&#x27;fechaSalida&#x27;).setErrors({vacio: true});
      }
    return;
  };
}

/**
 * Función para habilitar el respectivo input del checkbox en la edición de reserva
 * @param servicio 
 */
onChange(servicio){
  if(this.editarReserva.get(&#x27;servicio&#x27;+servicio.idServicio).value) {
    this.editarReserva.get(&#x27;num&#x27;+servicio.idServicio).enable();
  }else{
    this.editarReserva.get(&#x27;num&#x27;+servicio.idServicio).disable();
    this.editarReserva.get(&#x27;num&#x27;+servicio.idServicio).setValue(&#x27;&#x27;);
  }
}

  /**
   * Función para la validación de las personas (cantidad)
   */
  maximoPersonas(){
    return (): ValidationErrors &#x3D;&gt; {
      if(this.editarReserva.get(&#x27;num4&#x27;)) {
        let adultoExtra &#x3D; this.editarReserva.get(&#x27;servicio2&#x27;).value &#x3D;&#x3D; true &amp;&amp; this.editarReserva.get(&#x27;num2&#x27;).value !&#x3D; null &amp;&amp; this.editarReserva.get(&#x27;num2&#x27;).value &gt; 0 ? this.editarReserva.get(&#x27;num2&#x27;).value : 0;
        let menorExtra &#x3D; this.editarReserva.get(&#x27;servicio3&#x27;).value &#x3D;&#x3D; true &amp;&amp; this.editarReserva.get(&#x27;num3&#x27;).value !&#x3D; null &amp;&amp; this.editarReserva.get(&#x27;num3&#x27;).value &gt; 0 ? this.editarReserva.get(&#x27;num3&#x27;).value : 0;
        let mayorExtra &#x3D; this.editarReserva.get(&#x27;servicio4&#x27;).value &#x3D;&#x3D; true &amp;&amp; this.editarReserva.get(&#x27;num4&#x27;).value !&#x3D; null &amp;&amp; this.editarReserva.get(&#x27;num4&#x27;).value &gt; 0 ? this.editarReserva.get(&#x27;num4&#x27;).value : 0;
        let personasAlojamiento &#x3D; !null ? this.editarReserva.get(&#x27;numePersonasAlojamiento&#x27;).value : 0

        this.totalPersonas &#x3D; Number(adultoExtra) + Number(menorExtra) + Number(mayorExtra) + Number(personasAlojamiento);
        let total &#x3D; Number(adultoExtra) + Number(menorExtra) + Number(mayorExtra) + Number(personasAlojamiento);

        if(this.editarReserva.get(&#x27;numePersonasAlojamiento&#x27;).value !&#x3D; null &amp;&amp; this.editarReserva.get(&#x27;numePersonasAlojamiento&#x27;).value &gt; 0 &amp;&amp; this.editarReserva.get(&#x27;numePersonasAlojamiento&#x27;).value &lt; 3) {
          if(this.editarReserva.get(&#x27;numePersonasAlojamiento&#x27;).value &#x3D;&#x3D; 1 &amp;&amp; (this.editarReserva.get(&#x27;num2&#x27;).value &gt; 0 || this.editarReserva.get(&#x27;num3&#x27;).value &gt; 0 || this.editarReserva.get(&#x27;num4&#x27;).value &gt; 0)) {
            this.editarReserva.get(&#x27;numePersonasAlojamiento&#x27;).setErrors({&#x27;muchaGente&#x27;: true});
          }else{
            this.editarReserva.get(&#x27;numePersonasAlojamiento&#x27;).setErrors(null);
          }
          if(this.editarReserva.get(&#x27;num2&#x27;).value !&#x3D; null &amp;&amp; this.editarReserva.get(&#x27;num2&#x27;).value &gt; 0 &amp;&amp; this.editarReserva.get(&#x27;num2&#x27;).value &lt; 12) {
            if(this.editarReserva.get(&#x27;num3&#x27;).value !&#x3D; null &amp;&amp; this.editarReserva.get(&#x27;num3&#x27;).value &gt; 0 &amp;&amp; this.editarReserva.get(&#x27;num3&#x27;).value &lt; 12) {
              if(this.editarReserva.get(&#x27;num4&#x27;).value !&#x3D; null &amp;&amp; this.editarReserva.get(&#x27;num4&#x27;).value &gt; 0 &amp;&amp; this.editarReserva.get(&#x27;num4&#x27;).value &lt; 12) {
                if(total &gt; 12) {
                  this.editarReserva.get(&#x27;numePersonasAlojamiento&#x27;).setErrors({&#x27;muchaGente&#x27;: true});
                }else{
                  this.editarReserva.get(&#x27;numePersonasAlojamiento&#x27;).setErrors(null);
                }
              }else{
                this.editarReserva.get(&#x27;num4&#x27;).setErrors({&#x27;muchaGente&#x27;: true});
              }
            }else{
              this.editarReserva.get(&#x27;num3&#x27;).setErrors({&#x27;muchaGente&#x27;: true});
            }
          }else{
            this.editarReserva.get(&#x27;num2&#x27;).setErrors({&#x27;muchaGente&#x27;: true});
          }
        }else{
          this.editarReserva.get(&#x27;numePersonasAlojamiento&#x27;).setErrors({&#x27;noGente&#x27;: true});
        }
      }
      return;
    };
  }

  /**
   * Función para la comprobación del formulario y envío de datos al php para guardar en BD si en php valida las fechas, en caso de solo añadir servicios update directamente, se le pasa como parámetro la reserva (r)
   * @param r 
   */
  edicionReserva(r) {
    // Comprobación de campos, checkbox activado input relleno, sino no hace la función
    let validado: number &#x3D; 1;

    if(this.editarReserva.get(&#x27;numePersonasAlojamiento&#x27;).value &gt; 2) {
      validado &#x3D; 0;
    }
    Object.entries(this.editarReserva.value).forEach(entries &#x3D;&gt; {
      if(entries[0] !&#x3D; &#x27;num1&#x27; &amp;&amp; entries[0] !&#x3D; &#x27;numePersonasAlojamiento&#x27; &amp;&amp; entries[1] &#x3D;&#x3D; true){
        let idServicio &#x3D; String(entries[0]).substring(String(entries[0]).length-1);
        if(idServicio !&#x3D; &#x27;1&#x27; &amp;&amp; this.editarReserva.get(&#x27;num&#x27;+idServicio).value &amp;&amp; (this.editarReserva.get(&#x27;num&#x27;+idServicio).value &#x3D;&#x3D; &#x27;&#x27; || this.editarReserva.get(&#x27;num&#x27;+idServicio).value &lt; 1)){
          console.log(idServicio+&#x27; está mal&#x27;)
          validado &#x3D; 0;
        }
      }

      if(entries[0] !&#x3D; &#x27;num1&#x27; &amp;&amp; entries[1] &#x3D;&#x3D; true){
        let idServicio &#x3D; String(entries[0]).substring(String(entries[0]).length-1);
        if(idServicio &#x3D;&#x3D; &#x27;2&#x27; || idServicio &#x3D;&#x3D; &#x27;3&#x27; || idServicio &#x3D;&#x3D; &#x27;4&#x27;){
          if(this.editarReserva.get(&#x27;numePersonasAlojamiento&#x27;).value &#x3D;&#x3D; 1 &amp;&amp; this.editarReserva.get(&#x27;num&#x27;+idServicio).value &gt; 0) {
            validado &#x3D; 0;
          }
        }
      }
    }); 

    // Si formulario está validado se mandan los datos al php y comprueba las fechas y datos
    if(this.reservaEditar.tipo_alojamiento &#x3D;&#x3D; &#x27;Parcela&#x27;) {
      if(this.totalPersonas &lt; 0 &amp;&amp; this.totalPersonas &gt; 12){
        validado &#x3D; 0;
      }
    }

    if(validado &#x3D;&#x3D; 1 ){
      let updateReserva &#x3D; new HttpParams()
      .set(&#x27;opcion&#x27;, &#x27;29&#x27;)
      .set(&#x27;idReserva&#x27;, this.reservaEditar.idReserva);

      let insertReserva &#x3D; new HttpParams()
      .set(&#x27;opcion&#x27;, &#x27;31&#x27;)
      .set(&#x27;idReserva&#x27;, this.reservaEditar.idReserva);

      let deleteReserva &#x3D; new HttpParams()
      .set(&#x27;opcion&#x27;, &#x27;32&#x27;)
      .set(&#x27;idReserva&#x27;, this.reservaEditar.idReserva);;

      let fecha1 &#x3D; new Date(this.editarReserva.get(&#x27;fechaEntrada&#x27;).value);
      let fecha2 &#x3D; new Date(this.editarReserva.get(&#x27;fechaSalida&#x27;).value);

      let insert &#x3D; 0;
      let update &#x3D; 0;
      let deletee &#x3D; 0;

      if(fecha1.toLocaleDateString(&#x27;es-ES&#x27;,{day: &#x27;2-digit&#x27;, month: &#x27;2-digit&#x27;, year: &#x27;numeric&#x27;}) !&#x3D; this.reservaEditar.fecha_entrada || fecha2.toLocaleDateString(&#x27;es-ES&#x27;,{day: &#x27;2-digit&#x27;, month: &#x27;2-digit&#x27;, year: &#x27;numeric&#x27;}) !&#x3D; this.reservaEditar.fecha_salida) {
        update &#x3D; 1;
        updateReserva &#x3D; updateReserva.set(&#x27;fechaEntrada&#x27;, fecha1.getFullYear()+&#x27;-&#x27;+(fecha1.getMonth()+1)+&#x27;-&#x27;+fecha1.getDate());
        updateReserva &#x3D; updateReserva.set(&#x27;fechaSalida&#x27;, fecha2.getFullYear()+&#x27;-&#x27;+(fecha2.getMonth()+1)+&#x27;-&#x27;+fecha2.getDate());
        console.log(&#x27;alguna fecha distinta&#x27;)
      }else{
        console.log(&#x27;fechas iguales&#x27;)
      }

      let listaeditarReserva: any &#x3D; [];
      let listaupdateReserva: any &#x3D; [];
      let listadeleteReserva: any &#x3D; [];

      Object.entries(this.editarReserva.value).forEach(entries &#x3D;&gt; {
        if(entries[0] !&#x3D; &#x27;num1&#x27;){
          for (let i &#x3D; 0; i &lt; this.allServices.length; i++) {
            const element &#x3D; this.allServices[i];
            if(entries[0] &#x3D;&#x3D; &#x27;servicio&#x27;+element[&#x27;idServicio&#x27;] &amp;&amp; entries[1] &#x3D;&#x3D; true){
              let cant &#x3D; this.editarReserva.get(&#x27;num&#x27;+element[&#x27;idServicio&#x27;]).value ? this.editarReserva.get(&#x27;num&#x27;+element[&#x27;idServicio&#x27;]).value : 0;
              for (let z &#x3D; 0; z &lt; this.serviciosReservaEditar.length; z++) {
                const elemento &#x3D; this.serviciosReservaEditar[z];
                if(element.idServicio &#x3D;&#x3D; elemento.idServicio &amp;&amp; this.editarReserva.get(&#x27;num&#x27;+element.idServicio).value !&#x3D; &#x27;0&#x27;){
                  if(Number(element.cantidad) &#x3D;&#x3D; Number(cant)) { // Si la cantidad del servicio extra no se ha actualizado
                    break;
                  }else{ // Si la cantidad del servicio extra ha sido actualizada
                    update &#x3D; 1;
                    listaupdateReserva.push(element.idServicio,this.editarReserva.get(&#x27;num&#x27;+element.idServicio).value)
                    break;
                  }
                }else if(z &#x3D;&#x3D; this.serviciosReservaEditar.length-1 &amp;&amp; element.idServicio !&#x3D; elemento.idServicio &amp;&amp; this.editarReserva.get(&#x27;num&#x27;+element.idServicio).value !&#x3D; &#x27;0&#x27;){ // Si el servicio extra es nuevo
                  insert &#x3D; 1;
                  listaeditarReserva.push(element.idServicio,this.editarReserva.get(&#x27;num&#x27;+element.idServicio).value);
                  break;
                }
              }
              break;
            }else if(entries[0] &#x3D;&#x3D; &#x27;servicio&#x27;+element[&#x27;idServicio&#x27;]){
              for (let j &#x3D; 0; j &lt; this.serviciosReservaEditar.length; j++) {
                const elemento &#x3D; this.serviciosReservaEditar[j];
                if(element.idServicio &#x3D;&#x3D; elemento.idServicio &amp;&amp; this.editarReserva.get(&#x27;num&#x27;+element.idServicio).value !&#x3D; &#x27;0&#x27;) { // Si se ha eliminado el servicio extra
                  deletee &#x3D; 1;
                  listadeleteReserva.push(element.idServicio);
                }
              }
            }
          }
        }
      });

      if(deletee) { // Si hay algún servicio extra eliminado
        deleteReserva &#x3D; deleteReserva.set(&#x27;servicios&#x27;, listadeleteReserva);
        this.http.post&lt;any&gt;(&quot;http://34.206.59.221/dashboard.php&quot;, deleteReserva).subscribe(data &#x3D;&gt; { // Delete
          if(data &#x3D;&#x3D; null &amp;&amp; data &#x3D;&#x3D; 0) {
            this.errorEdicionReserva &#x3D; true;
          }
        });
      }
      
      if(update) { // Si hay alguna actualización de servicio extra
        if(listaupdateReserva.length &gt; 0) {
          updateReserva &#x3D; updateReserva.set(&#x27;servicios&#x27;,listaupdateReserva);
        }
        this.http.post&lt;any&gt;(&quot;http://34.206.59.221/dashboard.php&quot;, updateReserva).subscribe(data &#x3D;&gt; { // Update
          if(data &#x3D;&#x3D; null &amp;&amp; data &#x3D;&#x3D; 0) {
            this.errorEdicionReserva &#x3D; true;
          }else if(data &#x3D;&#x3D; 2) {
            this.errorEdicionReserva &#x3D; true;
            this.errorFechas &#x3D; true;
          }else if(data &#x3D;&#x3D; 3) {
            this.errorEdicionReserva &#x3D; true;
          }
        });
      }
      
      if(insert) { // Si hay algún servicio extra nuevo
        insertReserva &#x3D; insertReserva.set(&#x27;servicios&#x27;,listaeditarReserva);
        this.http.post&lt;any&gt;(&quot;http://34.206.59.221/dashboard.php&quot;, insertReserva).subscribe(data &#x3D;&gt; { // Insert
          if(data &#x3D;&#x3D; null &amp;&amp; data &#x3D;&#x3D; 0) {
            this.errorEdicionReserva &#x3D; true;
          }
        });
      }

      // Si todas las operaciones de la edición de reserva han sido satisfactorias, recarga la página
      if(!this.errorEdicionReserva) {
        location.reload();
      }
    }
  }

  /**
   * Función para eliminar la reserva, se pasa como parámetro la reserva (r), llama a la función del popup de confirmación
   * @param r 
   */
  eliminar(r) {
    this.openBottomSheet2(r);
  }

  /**
   * Función para cambiar la vista, la vista pasa al formulario para agregar temporada
   */
  agregarTemp() {
    this.agregarTemporada &#x3D; true;
  }

  /**
   * Función para añadir temporada
   */
  addTemporada() {
    // Si no hay algún campo vacío y cumplen los requisitos (Validators)
    if(this.agregarTemporadas.get(&#x27;fechaInicio&#x27;).value !&#x3D; &#x27;&#x27; &amp;&amp; this.agregarTemporadas.get(&#x27;fechaInicio&#x27;).value !&#x3D; null) { 
      this.agregarTemporadas.get(&#x27;fechaInicio&#x27;).setErrors(null);
    }else {
      this.agregarTemporadas.get(&#x27;fechaInicio&#x27;).setErrors({&#x27;noFechaInicio&#x27;: true});
    }
    if(this.agregarTemporadas.get(&#x27;fechaFin&#x27;).value !&#x3D; &#x27;&#x27; &amp;&amp; this.agregarTemporadas.get(&#x27;fechaFin&#x27;).value !&#x3D; null) {
      this.agregarTemporadas.get(&#x27;fechaFin&#x27;).setErrors(null);
    }else{
      this.agregarTemporadas.get(&#x27;fechaFin&#x27;).setErrors({&#x27;noFechaFin&#x27;: true});
    }
    if(this.agregarTemporadas.get(&#x27;nombre&#x27;).value !&#x3D; &#x27;&#x27; &amp;&amp; this.agregarTemporadas.get(&#x27;nombre&#x27;).value !&#x3D; null &amp;&amp; !this.agregarTemporadas.get(&#x27;nombre&#x27;).hasError(&#x27;pattern&#x27;)) {
      this.agregarTemporadas.get(&#x27;nombre&#x27;).setErrors(null);
    }else{
      this.agregarTemporadas.get(&#x27;nombre&#x27;).setErrors({&#x27;noNombre&#x27;: true});
    }
    if(this.agregarTemporadas.get(&#x27;multiplicador&#x27;).value !&#x3D; &#x27;&#x27; &amp;&amp; this.agregarTemporadas.get(&#x27;multiplicador&#x27;).value !&#x3D; null) {
      this.agregarTemporadas.get(&#x27;multiplicador&#x27;).setErrors(null);
    }else{
      this.agregarTemporadas.get(&#x27;multiplicador&#x27;).setErrors({&#x27;noMulti&#x27;: true});
    }

    if(!this.agregarTemporadas.get(&#x27;fechaInicio&#x27;).hasError(&#x27;noFechaInicio&#x27;) &amp;&amp; !this.agregarTemporadas.get(&#x27;fechaFin&#x27;).hasError(&#x27;noFechaFin&#x27;) &amp;&amp; !this.agregarTemporadas.get(&#x27;nombre&#x27;).hasError(&#x27;noNombre&#x27;) &amp;&amp; !this.agregarTemporadas.get(&#x27;multiplicador&#x27;).hasError(&#x27;noMulti&#x27;)) {
      let tempParams &#x3D; new HttpParams()
      .set(&#x27;opcion&#x27;, &#x27;24&#x27;)
      .set(&#x27;nombre&#x27;, this.agregarTemporadas.get(&#x27;nombre&#x27;).value)
      .set(&#x27;fechaInicio&#x27;, moment(this.agregarTemporadas.get(&#x27;fechaInicio&#x27;).value).format(&#x27;YYYY-MM-DD&#x27;))
      .set(&#x27;fechaFin&#x27;, moment(this.agregarTemporadas.get(&#x27;fechaFin&#x27;).value).format(&#x27;YYYY-MM-DD&#x27;))
      .set(&#x27;multiplicador&#x27;, this.agregarTemporadas.get(&#x27;multiplicador&#x27;).value)
      .set(&#x27;insert&#x27;, &#x27;1&#x27;);

      this.http.post&lt;any&gt;(&quot;http://34.206.59.221/dashboard.php&quot;, tempParams).subscribe(data &#x3D;&gt; {
        if(data !&#x3D; null &amp;&amp; data !&#x3D; 0) {
          location.reload();
        }else{
          this.errorTemp &#x3D; true;
        }
      });
    }
  }

  /**
   * Función para eliminar temporada, llama a la función del popup para confirmar la eliminación, se le pasa como parámetro la reserva (r)
   * @param nombre 
   */
  eliminarTemporada (nombre) {
    this.openBottomSheet(nombre);
  }

  /**
   * Función para editar la temporada
   * @param nombre 
   * @param fechaInicio 
   */
  editarTemporada(nombre, fechaInicio) {
    this.errorTemp &#x3D; false;
    this.temporadaEditar &#x3D; null;
    this.dashboardAdminTemporadasEditar &#x3D; true;
    for (let i &#x3D; 0; i &lt; this.listadoTemporadas.length; i++) {
      const element &#x3D; this.listadoTemporadas[i];
      if (element.nombre_temporada &#x3D;&#x3D; nombre &amp;&amp; element.fecha_entrada &#x3D;&#x3D; fechaInicio) {
        this.nombreTemp &#x3D; nombre;
        this.fecha1Temp &#x3D; fechaInicio;
        this.fecha2Temp &#x3D; element.fecha_salida;
        this.multiplicativoTemp &#x3D; element.multiplicador;
        this.temporadaEditar &#x3D; element;
      }
    }
    this.edicionTemporada.get(&#x27;nombre&#x27;).setValue(this.temporadaEditar.nombre_temporada);
    this.edicionTemporada.get(&#x27;fechaInicio&#x27;).setValue(this.temporadaEditar.fecha_entrada);
    this.edicionTemporada.get(&#x27;fechaFin&#x27;).setValue(this.temporadaEditar.fecha_salida);
    this.edicionTemporada.get(&#x27;multiplicador&#x27;).setValue(this.temporadaEditar.multiplicador);
  }

  /**
   * Función para guardar la temporada en la BD
   */
  guardarTemporada() {
    let nombre &#x3D; this.edicionTemporada.get(&#x27;nombre&#x27;).value;
    let fechaInicio &#x3D; moment(this.edicionTemporada.get(&#x27;fechaInicio&#x27;).value);
    let fechaFin &#x3D; moment(this.edicionTemporada.get(&#x27;fechaFin&#x27;).value);
    let multiplicador &#x3D; this.edicionTemporada.get(&#x27;multiplicador&#x27;).value;

    let tempParams &#x3D; new HttpParams()
    .set(&#x27;opcion&#x27;, &#x27;24&#x27;)
    .set(&#x27;nombre&#x27;, nombre)
    .set(&#x27;fechaInicio&#x27;, fechaInicio.format(&#x27;YYYY-MM-DD&#x27;))
    .set(&#x27;fechaFin&#x27;, fechaFin.format(&#x27;YYYY-MM-DD&#x27;))
    .set(&#x27;multiplicador&#x27;, multiplicador)
    .set(&#x27;antiguoNombre&#x27;, this.nombreTemp)
    .set(&#x27;antiguoFecha1&#x27;, this.fecha1Temp)
    .set(&#x27;antiguoFecha2&#x27;, this.fecha2Temp)
    .set(&#x27;antiguoMultiplicativo&#x27;, this.multiplicativoTemp)
    .set(&#x27;update&#x27;, &#x27;1&#x27;);

    this.http.post&lt;any&gt;(&quot;http://34.206.59.221/dashboard.php&quot;, tempParams).subscribe(data &#x3D;&gt; {
      if(data !&#x3D; null &amp;&amp; data !&#x3D; 0) {
        location.reload();
      }else{
        this.errorTemp &#x3D; true;
      }
    });
  }

  /**
   * Función para editar el servicio
   * @param servicio 
   */
  editarServicio(servicio) {
    this.dashboardServiciosEditar &#x3D; true;
    this.edicionServicios.get(&#x27;idServicio&#x27;).setValue(servicio.idServicio);
    this.edicionServicios.get(&#x27;nombre&#x27;).setValue(servicio.nombre);
    this.edicionServicios.get(&#x27;precio&#x27;).setValue(servicio.precio);
    if(servicio.idAlojamiento !&#x3D; null) {
      let alojamiento &#x3D; new HttpParams()
      .set(&#x27;opcion&#x27;, &#x27;12&#x27;)
      .set(&#x27;idAlojamiento&#x27;, servicio.idAlojamiento);

      this.http.post&lt;any&gt;(&quot;http://34.206.59.221/dashboard.php&quot;, alojamiento).subscribe(data &#x3D;&gt;{ // Obtener las entradas al camping del día
        if(data !&#x3D; null &amp;&amp; data !&#x3D; 0){
          this.servicioEditar &#x3D; data[0];
          this.servicioAlojamiento &#x3D; true;
          this.edicionServicios.get(&#x27;idAlojamiento&#x27;).setValue(this.servicioEditar.idAlojamiento);
        }
      });
    }else{
      this.servicioAlojamiento &#x3D; false;
      this.edicionServicios.get(&#x27;idAlojamiento&#x27;).setValue(&#x27;&#x27;);
    }
  }

  /**
   * Función para eliminar el servicio, llama a la función popup para confirmar su eliminación
   * @param servicio 
   */
  eliminarServicio(servicio) {
    this.openBottomSheet3(servicio);
  }

  /**
   * Función para guardar el servicio en la BD (edición del servicio)
   */
  guardarServicio() {
    this.errorGuardarServicio &#x3D; false;
    if(this.edicionServicios.get(&#x27;nombre&#x27;).value !&#x3D; null &amp;&amp; this.edicionServicios.get(&#x27;nombre&#x27;).value !&#x3D; &#x27;&#x27;) {
      this.edicionServicios.setErrors({&#x27;noNombre&#x27;: true});
    }else{
      this.edicionServicios.setErrors(null);
    }
    if(this.edicionServicios.get(&#x27;precio&#x27;).value !&#x3D; null &amp;&amp; this.edicionServicios.get(&#x27;precio&#x27;).value !&#x3D; &#x27;&#x27; &amp;&amp; this.edicionServicios.get(&#x27;precio&#x27;).value !&#x3D; 0) {
      this.edicionServicios.setErrors({&#x27;noPrecio&#x27;: true});
    }else{
      this.edicionServicios.setErrors(null);
    }

    let servicio &#x3D; new HttpParams()
      .set(&#x27;opcion&#x27;, &#x27;26&#x27;)
      .set(&#x27;nombre&#x27;, this.edicionServicios.get(&#x27;nombre&#x27;).value)
      .set(&#x27;precio&#x27;, this.edicionServicios.get(&#x27;precio&#x27;).value)
      .set(&#x27;idServicio&#x27;, this.edicionServicios.get(&#x27;idServicio&#x27;).value);

    this.http.post&lt;any&gt;(&quot;http://34.206.59.221/dashboard.php&quot;, servicio).subscribe(data &#x3D;&gt;{ // Obtener las entradas al camping del día
      if(data !&#x3D; null &amp;&amp; data !&#x3D; 0){
        location.reload();
      }else{
        this.errorGuardarServicio &#x3D; true;
      }
    });
  }

  /**
   * Función para cambiar la vista para agregar alojamiento (servicio)
   */
  addAlojamiento() {
    this.dashboardServiciosEditar &#x3D; true;
    this.agregarAlojamiento &#x3D; true;
  }

  /**
   * Función para guardar el alojamiento (servicio) en la BD
   */
  guardarAlojamiento() {
    if(this.addAlojamientoForm.get(&#x27;nombre&#x27;).value !&#x3D; null &amp;&amp; this.addAlojamientoForm.get(&#x27;nombre&#x27;).value !&#x3D; &#x27;&#x27;) {
      this.addAlojamientoForm.get(&#x27;nombre&#x27;).setErrors(null);
    }else{
      this.addAlojamientoForm.get(&#x27;nombre&#x27;).setErrors({&#x27;noNombre&#x27;: true});
    }
    if(this.addAlojamientoForm.get(&#x27;precio&#x27;).value !&#x3D; null &amp;&amp; this.addAlojamientoForm.get(&#x27;precio&#x27;).value !&#x3D; &#x27;&#x27; &amp;&amp; this.addAlojamientoForm.get(&#x27;precio&#x27;).value !&#x3D; 0) {
      this.addAlojamientoForm.get(&#x27;precio&#x27;).setErrors(null);
    }else{
      this.addAlojamientoForm.get(&#x27;precio&#x27;).setErrors({&#x27;noPrecio&#x27;: true});
    }
    if(this.addAlojamientoForm.get(&#x27;tipo&#x27;).value !&#x3D; null &amp;&amp; this.addAlojamientoForm.get(&#x27;tipo&#x27;).value !&#x3D; &#x27;&#x27;) {
      this.addAlojamientoForm.get(&#x27;tipo&#x27;).setErrors(null);
    }else{
      this.addAlojamientoForm.get(&#x27;tipo&#x27;).setErrors({&#x27;noTipo&#x27;: true});
    }

    if(this.addAlojamientoForm.get(&#x27;tipo&#x27;).value !&#x3D; null &amp;&amp; this.addAlojamientoForm.get(&#x27;tipo&#x27;).value !&#x3D; &#x27;&#x27; &amp;&amp; this.addAlojamientoForm.get(&#x27;tipo&#x27;).value &#x3D;&#x3D; &#x27;parcela&#x27;) {

      if(this.addAlojamientoForm.get(&#x27;sombra&#x27;).value !&#x3D; null &amp;&amp; this.addAlojamientoForm.get(&#x27;sombra&#x27;).value !&#x3D; &#x27;&#x27;) {
        this.addAlojamientoForm.get(&#x27;sombra&#x27;).setErrors(null);
      }else{
        this.addAlojamientoForm.get(&#x27;sombra&#x27;).setErrors({&#x27;noSombra&#x27;: true});
      }
      if(this.addAlojamientoForm.get(&#x27;dimension&#x27;).value !&#x3D; null &amp;&amp; this.addAlojamientoForm.get(&#x27;dimension&#x27;).value !&#x3D; &#x27;&#x27;) {
        this.addAlojamientoForm.get(&#x27;dimension&#x27;).setErrors(null);
      }else{
        this.addAlojamientoForm.get(&#x27;dimension&#x27;).setErrors({&#x27;noDimension&#x27;: true});
      }
    }else if (this.addAlojamientoForm.get(&#x27;tipo&#x27;).value !&#x3D; null &amp;&amp; this.addAlojamientoForm.get(&#x27;tipo&#x27;).value !&#x3D; &#x27;&#x27; &amp;&amp; this.addAlojamientoForm.get(&#x27;tipo&#x27;).value &#x3D;&#x3D; &#x27;bungalow&#x27;) {

      if(this.addAlojamientoForm.get(&#x27;habitaciones&#x27;).value !&#x3D; null &amp;&amp; this.addAlojamientoForm.get(&#x27;habitaciones&#x27;).value !&#x3D; &#x27;&#x27; &amp;&amp; this.addAlojamientoForm.get(&#x27;habitaciones&#x27;).value !&#x3D; 0) {
        this.addAlojamientoForm.get(&#x27;habitaciones&#x27;).setErrors(null);
      }else{
        this.addAlojamientoForm.get(&#x27;habitaciones&#x27;).setErrors({&#x27;noHabitaciones&#x27;: true});
      }
      if(this.addAlojamientoForm.get(&#x27;maximo_personas&#x27;).value !&#x3D; null &amp;&amp; this.addAlojamientoForm.get(&#x27;maximo_personas&#x27;).value !&#x3D; &#x27;&#x27; &amp;&amp; this.addAlojamientoForm.get(&#x27;maximo_personas&#x27;).value !&#x3D; 0) {
        this.addAlojamientoForm.get(&#x27;maximo_personas&#x27;).setErrors(null);
      }else{
        this.addAlojamientoForm.get(&#x27;dimension&#x27;).setErrors({&#x27;noMaximo&#x27;: true});
      }
    }

    let ok &#x3D; false;
    if(!this.addAlojamientoForm.get(&#x27;nombre&#x27;).hasError(&#x27;noNombre&#x27;) &amp;&amp; !this.addAlojamientoForm.get(&#x27;precio&#x27;).hasError(&#x27;noPrecio&#x27;) &amp;&amp; !this.addAlojamientoForm.get(&#x27;tipo&#x27;).hasError(&#x27;noTipo&#x27;) ){
      if(this.addAlojamientoForm.get(&#x27;tipo&#x27;).value &#x3D;&#x3D; &#x27;parcela&#x27; &amp;&amp; !this.addAlojamientoForm.get(&#x27;sombra&#x27;).hasError(&#x27;noSombra&#x27;) &amp;&amp; !this.addAlojamientoForm.get(&#x27;dimension&#x27;).hasError(&#x27;noDimension&#x27;)){
        ok &#x3D; true;
      }else if(this.addAlojamientoForm.get(&#x27;tipo&#x27;).value &#x3D;&#x3D; &#x27;bungalow&#x27; &amp;&amp; !this.addAlojamientoForm.get(&#x27;habitaciones&#x27;).hasError(&#x27;noHabitaciones&#x27;) &amp;&amp; !this.addAlojamientoForm.get(&#x27;maximo_personas&#x27;).hasError(&#x27;noMaximo&#x27;)){
        ok &#x3D; true;
      }
    }

    if(ok) {
      let insertAlojamiento &#x3D; new HttpParams()
      .set(&#x27;opcion&#x27;, &#x27;27&#x27;)
      .set(&#x27;nombre&#x27;, this.addAlojamientoForm.get(&#x27;nombre&#x27;).value)
      .set(&#x27;precio&#x27;, this.addAlojamientoForm.get(&#x27;precio&#x27;).value)
      .set(&#x27;tipo&#x27;, this.addAlojamientoForm.get(&#x27;tipo&#x27;).value);
      if(this.addAlojamientoForm.get(&#x27;tipo&#x27;).value &#x3D;&#x3D; &#x27;parcela&#x27;) {
        insertAlojamiento &#x3D; insertAlojamiento.set(&#x27;sombra&#x27;, this.addAlojamientoForm.get(&#x27;sombra&#x27;).value);
        insertAlojamiento &#x3D; insertAlojamiento.set(&#x27;dimension&#x27;, this.addAlojamientoForm.get(&#x27;dimension&#x27;).value);
      }else{
        insertAlojamiento &#x3D; insertAlojamiento.set(&#x27;habitaciones&#x27;, this.addAlojamientoForm.get(&#x27;habitaciones&#x27;).value);
        insertAlojamiento &#x3D; insertAlojamiento.set(&#x27;maximo_personas&#x27;, this.addAlojamientoForm.get(&#x27;maximo_personas&#x27;).value);
      }

      this.http.post&lt;any&gt;(&quot;http://34.206.59.221/dashboard.php&quot;, insertAlojamiento).subscribe(data &#x3D;&gt;{ // Obtener las entradas al camping del día
      if(data !&#x3D; null &amp;&amp; data !&#x3D; 0){
        location.reload();
      }else{
        this.errorAgregarAlojamiento &#x3D; true;
      }
    });
    }
  }

  /**
   * Función para cambiar la vista para agregar un servicio (NO alojamiento)
   */
  addServicio() {
    this.dashboardServiciosEditar &#x3D; true;
  }

  /**
   * Función para sumar 2 números (en este caso los leo como float para hacer el cálculo)
   * @param a 
   * @param b 
   */
  suma(a,b){
    return parseFloat(a)+parseFloat(b);
  }


  /**
   * Función que se ejecuta al empezar el archivo de Angular
   */
  ngOnInit(): void {
    this.scrollToBottom();
    if(localStorage.getItem(&#x27;usuarioActual&#x27;) !&#x3D; null){ // Comprobación de que tiene autorización para entrar a la administración
      this.usuarioActual &#x3D; desencriptar(localStorage.getItem(&#x27;usuarioActual&#x27;));
      if(this.usuarioActual[&#x27;rol&#x27;] &#x3D;&#x3D; &#x27;cliente&#x27;){
        window.location.href &#x3D; &#x27;http://34.206.59.221:4200/&#x27;;
      }else{
        this.trabajador &#x3D; true;
      }
    }else{
      window.location.href &#x3D; &#x27;http://34.206.59.221:4200/&#x27;;
    }

    if (this.router.snapshot.url.length &#x3D;&#x3D; 1 &amp;&amp; this.router.snapshot.url[0].path &#x3D;&#x3D; &#x27;dashboard&#x27;){
      // Si en la URL es solo /dashboard, carga lso datos de inicio

      /**
       * ? Empieza aquí
       */

      // Puestas las variables a false menos la correspondiente para mostrar su página
      this.dashboardInicio &#x3D; true;
      this.dashboardRevisarResenias &#x3D; false;
      this.dashboardSalidasHoy &#x3D; false;
      this.dashboardEntradasHoy &#x3D; false;
      this.dashboardReservas &#x3D; false;
      this.dashboardResenias &#x3D; false;
      this.dashboardUsuarios &#x3D; false;
      this.dashboardServicios &#x3D; false;
      this.dashboardAdmin &#x3D; false;
      this.dashboardAdminTemporadas &#x3D; false;
      this.dashboardAdminServicios &#x3D; false;

      this.atrasBusqueda();

      // Entradas hoy
      let entrada &#x3D; new HttpParams()
      .set(&#x27;opcion&#x27;, &#x27;1&#x27;);

      this.http.post&lt;any&gt;(&quot;http://34.206.59.221/dashboard.php&quot;, entrada).subscribe(data &#x3D;&gt;{ // Obtener las entradas al camping del día
        if(data !&#x3D; null){
          this.reservasHoy &#x3D; data[0][&#x27;COUNT(*)&#x27;];
        }
      });
      
      // Salidas hoy
      let salida &#x3D; new HttpParams()
      .set(&#x27;opcion&#x27;, &#x27;2&#x27;);

      this.http.post&lt;any&gt;(&quot;http://34.206.59.221/dashboard.php&quot;, salida).subscribe(data &#x3D;&gt;{ // Obtener las salidas del camping del día
        if(data !&#x3D; null){
          this.reservasHoySalidas &#x3D; data[0][&#x27;COUNT(*)&#x27;];
        }
      });

      // Reseñas por revisar
      let resenias &#x3D; new HttpParams()
      .set(&#x27;opcion&#x27;, &#x27;3&#x27;);

      this.http.post&lt;any&gt;(&quot;http://34.206.59.221/dashboard.php&quot;, resenias).subscribe(data &#x3D;&gt;{ // Obtener las reseñas que está por ser publicadas
        if(data !&#x3D; null){
          this.revisarResenias &#x3D; data[0][&#x27;COUNT(*)&#x27;];
        }
      });

      // Últimas 10 reservas
      let reservas &#x3D; new HttpParams()
      .set(&#x27;opcion&#x27;, &#x27;4&#x27;);

      this.http.post&lt;any&gt;(&quot;http://34.206.59.221/dashboard.php&quot;, reservas).subscribe(data &#x3D;&gt;{ // Obtener las últimas 10 reservas
        if(data !&#x3D; null){
          this.reservasList &#x3D; data;
        }
      });

      /**
       * ? Acaba aquí
       */

    }else if (this.router.snapshot.url.length &gt; 1 &amp;&amp; this.router.snapshot.url[0].path &#x3D;&#x3D; &#x27;dashboard&#x27; &amp;&amp; this.router.snapshot.url[1].path &#x3D;&#x3D; &#x27;revisar-resenias&#x27;) {
      // Revisar todas las reseñas sin publicar (en la BD publicado a 0), pendientes de aprobar

      /**
       * ? Empieza aquí
       */

      // Puestas las variables a false menos la correspondiente para mostrar su página
      this.dashboardInicio &#x3D; false;
      this.dashboardRevisarResenias &#x3D; true;
      this.dashboardSalidasHoy &#x3D; false;
      this.dashboardEntradasHoy &#x3D; false;
      this.dashboardReservas &#x3D; false;
      this.dashboardResenias &#x3D; false;
      this.dashboardUsuarios &#x3D; false;
      this.dashboardServicios &#x3D; false;
      this.dashboardAdmin &#x3D; false;
      this.dashboardAdminTemporadas &#x3D; false;
      this.dashboardAdminServicios &#x3D; false;

      this.atrasBusqueda();

      let reseniasAprobar &#x3D; new HttpParams()
      .set(&#x27;opcion&#x27;, &#x27;5&#x27;);

      this.http.post &lt; any &gt; (&quot;http://34.206.59.221/dashboard.php&quot;, reseniasAprobar).subscribe(data &#x3D;&gt; { // Obtener las reseñas que están por ser aprobadas para ser publicadas
        if (data!&#x3D; null &amp;&amp; data !&#x3D; 0) {
          this.listadoResenias &#x3D; data;
          this.listadoReseniasAlgo &#x3D; false;

          for (let i &#x3D; 0; i &lt; this.listadoResenias.length; i++) {
            const element &#x3D; this.listadoResenias[i];

            let nombreUser &#x3D; new HttpParams()
              .set(&#x27;opcion&#x27;, &#x27;6&#x27;)
              .set(&#x27;idUsuario&#x27;, element[&#x27;idUsuario&#x27;]);

            this.http.post &lt; any &gt; (&quot;http://34.206.59.221/dashboard.php&quot;, nombreUser).subscribe(data &#x3D;&gt; { // Obtener los nombres de todas las reseñas por aprobar
              if (data !&#x3D; null &amp;&amp; data !&#x3D; 0) {
                this.listadoResenias[i].alias_usuario &#x3D; data[0][&#x27;alias_usuario&#x27;];
              }
            });

            let idAlojamientoResenia &#x3D; new HttpParams()
              .set(&#x27;opcion&#x27;, &#x27;7&#x27;)
              .set(&#x27;idResenia&#x27;, element[&#x27;idResenia&#x27;]);

            this.http.post &lt; any &gt; (&quot;http://34.206.59.221/dashboard.php&quot;, idAlojamientoResenia).subscribe(data &#x3D;&gt; { // Obtener el idAlojamiento de todas las reseñas por aprobar
              if (data !&#x3D; null &amp;&amp; data !&#x3D; 0) {
                this.listadoResenias[i].idAlojamiento &#x3D; data[0][&#x27;idAlojamiento&#x27;];
              }
            });
          }
        } else {
          this.listadoReseniasAlgo &#x3D; true;
        }
      });

       /**
        * ? Acaba aquí
        */

    }else if (this.router.snapshot.url.length &gt; 1 &amp;&amp; this.router.snapshot.url[0].path &#x3D;&#x3D; &#x27;dashboard&#x27; &amp;&amp; this.router.snapshot.url[1].path &#x3D;&#x3D; &#x27;salidas-hoy&#x27;) {
      // Todas las reservas que salen del camping en el día

      /**
       * ? Empieza aquí
       */

      // Puestas las variables a false menos la correspondiente para mostrar su página
      this.dashboardInicio &#x3D; false;
      this.dashboardRevisarResenias &#x3D; false;
      this.dashboardSalidasHoy &#x3D; true;
      this.dashboardEntradasHoy &#x3D; false;
      this.dashboardReservas &#x3D; false;
      this.dashboardResenias &#x3D; false;
      this.dashboardUsuarios &#x3D; false;
      this.dashboardServicios &#x3D; false;
      this.dashboardAdmin &#x3D; false;
      this.dashboardAdminTemporadas &#x3D; false;
      this.dashboardAdminServicios &#x3D; false;

      this.atrasBusqueda();

      /**
       * ! Aquí va el código de SALIDAS HOY, CUADRADO CENTRAL DE INICIO
       */
      let salidasHoy &#x3D; new HttpParams()
      .set(&#x27;opcion&#x27;, &#x27;10&#x27;);
      this.http.post &lt; any &gt; (&quot;http://34.206.59.221/dashboard.php&quot;, salidasHoy).subscribe(data &#x3D;&gt; { // Obtener las reservas que saldrán hoy
        if (data !&#x3D; null &amp;&amp; data !&#x3D; 0) {
          this.listadoSalidasHoy &#x3D; data;
          for (let i &#x3D; 0; i &lt; this.listadoSalidasHoy.length; i++) {
            const element &#x3D; this.listadoSalidasHoy[i];

            this.serviciosExtras &#x3D; [];
            this.totalPagar &#x3D; 0;

            // Total de días de la reserva
            let dias &#x3D; Math.floor((new Date(this.listadoSalidasHoy[i].fecha_salida).getTime() - new Date(this.listadoSalidasHoy[i].fecha_entrada).getTime())/86400000);

            let nombreUser &#x3D; new HttpParams()
            .set(&#x27;opcion&#x27;, &#x27;6&#x27;)
            .set(&#x27;idUsuario&#x27;, element[&#x27;idUsuario&#x27;]);
            this.http.post &lt; any &gt; (&quot;http://34.206.59.221/dashboard.php&quot;, nombreUser).subscribe(data &#x3D;&gt; { // Obtener los datos del cliente
              if (data !&#x3D; null &amp;&amp; data !&#x3D; 0) {
                this.listadoSalidasHoy[i].alias_usuario &#x3D; data[0][&#x27;alias_usuario&#x27;];
                this.listadoSalidasHoy[i].nif &#x3D; data[0][&#x27;nif_usuario&#x27;];
                this.listadoSalidasHoy[i].nombre_usuario &#x3D; data[0][&#x27;nombre_usuario&#x27;];
                this.listadoSalidasHoy[i].telefono &#x3D; data[0][&#x27;telefono&#x27;];
                this.listadoSalidasHoy[i].email &#x3D; data[0][&#x27;email&#x27;];
                this.listadoSalidasHoy[i].fecha_entrada &#x3D; new Date(this.listadoSalidasHoy[i].fecha_entrada).toLocaleDateString(&quot;es-ES&quot;,{year: &quot;numeric&quot;, month:&quot;2-digit&quot;, day: &quot;2-digit&quot;});
                this.listadoSalidasHoy[i].fecha_salida &#x3D; new Date(this.listadoSalidasHoy[i].fecha_salida).toLocaleDateString(&quot;es-ES&quot;,{year: &quot;numeric&quot;, month:&quot;2-digit&quot;, day: &quot;2-digit&quot;});

                let idAlojamientoSalidasHoy &#x3D; new HttpParams()
                .set(&#x27;opcion&#x27;, &#x27;11&#x27;)
                .set(&#x27;idReserva&#x27;, element[&#x27;idReserva&#x27;]);
                this.http.post &lt;any&gt;(&quot;http://34.206.59.221/dashboard.php&quot;, idAlojamientoSalidasHoy).subscribe(data &#x3D;&gt; { // Obtener los datos de los alojamientos de la reserva
                  if (data !&#x3D; null &amp;&amp; data !&#x3D; 0) {
                    this.listadoSalidasHoy[i].tipo_alojamiento &#x3D; data[0][&#x27;nombre&#x27;];
                    this.listadoSalidasHoy[i].idAlojamiento &#x3D; data[0][&#x27;idAlojamiento&#x27;];
                    this.listadoSalidasHoy[i].precioAlojamiento &#x3D; data[0][&#x27;precio&#x27;];

                    this.totalPagar &#x3D; (parseFloat(this.listadoSalidasHoy[i].precioAlojamiento)*dias)*(parseFloat(this.listadoSalidasHoy[i].multiplicativo));
                    
                    let numeAlojamiento &#x3D; new HttpParams()
                    .set(&#x27;opcion&#x27;, &#x27;12&#x27;)
                    .set(&#x27;idAlojamiento&#x27;, data[0][&#x27;idAlojamiento&#x27;]);
                    this.http.post &lt; any &gt; (&quot;http://34.206.59.221/dashboard.php&quot;, numeAlojamiento).subscribe(data &#x3D;&gt; { // Obtener el número del alojamiento
                      if (data !&#x3D; null &amp;&amp; data !&#x3D; 0) {
                        this.listadoSalidasHoy[i].numeroAlojamiento &#x3D; data[0][&#x27;numeroAlojamiento&#x27;];
                        if(data[0][&#x27;tipo&#x27;] &#x3D;&#x3D; &#x27;bungalow&#x27;){
                          this.listadoSalidasHoy[i].habitaciones &#x3D; data[0][&#x27;habitaciones&#x27;];
                          this.listadoSalidasHoy[i].maximo_personas &#x3D; data[0][&#x27;maximo_personas&#x27;];
                        }else{
                          this.listadoSalidasHoy[i].dimension &#x3D; data[0][&#x27;dimension&#x27;];
                          switch (data[0][&#x27;sombra&#x27;]) { // Sombra de la parcela
                            case &#x27;0&#x27;:
                              this.listadoSalidasHoy[i].sombra &#x3D; &quot;Nada&quot;;
                              break;
                            case &#x27;1&#x27;:
                              this.listadoSalidasHoy[i].sombra &#x3D; &quot;Media&quot;;
                              break;
                            case &#x27;2&#x27;:
                              this.listadoSalidasHoy[i].sombra &#x3D; &quot;Bastante&quot;;
                              break;
                            case &#x27;3&#x27;:
                              this.listadoSalidasHoy[i].sombra &#x3D; &#x27;Mucha&#x27;;
                              break;
                            default:
                              this.listadoSalidasHoy[i].sombra &#x3D; &quot;Desconocido&quot;;
                              break;
                          }
                        }
                      }
                    });

                    let cantidadFinal: any;
                    let cantidadServicios &#x3D; new HttpParams()
                    .set(&#x27;opcion&#x27;, &#x27;14&#x27;)
                    .set(&#x27;idReserva&#x27;, element[&#x27;idReserva&#x27;]);
                    
                    this.http.post&lt;any&gt;(&quot;http://34.206.59.221/dashboard.php&quot;, cantidadServicios).subscribe(data &#x3D;&gt; { // Obtener la cantidad de servicios contratados
                      if (data !&#x3D; null &amp;&amp; data !&#x3D; 0) {
                        cantidadFinal &#x3D; data;
                      }
                    });

                    let serviciosReserva: any &#x3D; [];
                    let servicios &#x3D; new HttpParams()
                    .set(&#x27;opcion&#x27;, &#x27;13&#x27;)
                    .set(&#x27;idReserva&#x27;, element[&#x27;idReserva&#x27;]);
                    this.http.post &lt; any &gt; (&quot;http://34.206.59.221/dashboard.php&quot;, servicios).subscribe(data &#x3D;&gt; { // Obtener los datos de los servicios contratados
                      if (data !&#x3D; null &amp;&amp; data !&#x3D; 0) {
                        serviciosReserva &#x3D; data;
                        this.pago &#x3D; 0;
                        for (let x &#x3D; 0; x &lt; cantidadFinal?.length; x++) {
                          const elemento1 &#x3D; cantidadFinal[x];
                          for (let r &#x3D; 0; r &lt; serviciosReserva.length; r++) {
                            const elemento2 &#x3D; serviciosReserva[r];
                            if(elemento1.idServicio &#x3D;&#x3D;&#x3D; elemento2.idServicio) {
                              elemento2.cantidad &#x3D; elemento1.cantidad;
                              //elemento2.precioTotal &#x3D; elemento2.cantidad*elemento2.precio;
                              this.pago +&#x3D; (elemento2.cantidad*elemento2.precio);
                              this.serviciosExtras.push(elemento2);
                              if(r &#x3D;&#x3D; serviciosReserva.length-1){
                                this.serviciosExtras.push(this.pago);
                              }
                            }
                          }
                        }
                        this.listadoSalidasHoy[i].servicios &#x3D; this.serviciosExtras;
                        this.serviciosExtras &#x3D; [];
                      }
                    });
                    this.listadoSalidasHoy[i].total_pagar &#x3D; this.totalPagar.toFixed(2);
                  }
                });
              }
            });
          }
        }
      });

       /**
        * ? Acaba aquí
        */

    }else if (this.router.snapshot.url.length &gt; 1 &amp;&amp; this.router.snapshot.url[0].path &#x3D;&#x3D; &#x27;dashboard&#x27; &amp;&amp; this.router.snapshot.url[1].path &#x3D;&#x3D; &#x27;entradas-hoy&#x27;) {
      // Todas las reservas que entran al camping en el día

      /**
       * ? Empieza aquí
       */

      // Puestas las variables a false menos la correspondiente para mostrar su página
      this.dashboardInicio &#x3D; false;
      this.dashboardRevisarResenias &#x3D; false;
      this.dashboardSalidasHoy &#x3D; false;
      this.dashboardEntradasHoy &#x3D; true;
      this.dashboardReservas &#x3D; false;
      this.dashboardResenias &#x3D; false;
      this.dashboardUsuarios &#x3D; false;
      this.dashboardServicios &#x3D; false;
      this.dashboardAdmin &#x3D; false;
      this.dashboardAdminTemporadas &#x3D; false;
      this.dashboardAdminServicios &#x3D; false;

      this.atrasBusqueda();

      /**
       * ! Aquí va el código de ENTRADAS HOY, CUADRADO IZQUIERDO DE INICIO
       */
      let entradasHoy &#x3D; new HttpParams()
      .set(&#x27;opcion&#x27;, &#x27;15&#x27;);

      this.http.post &lt; any &gt; (&quot;http://34.206.59.221/dashboard.php&quot;, entradasHoy).subscribe(data &#x3D;&gt; { // Obtener las reservas que saldrán hoy
        if (data !&#x3D; null &amp;&amp; data !&#x3D; 0) {
          this.listadoEntradasHoy &#x3D; data;
          for (let i &#x3D; 0; i &lt; this.listadoEntradasHoy.length; i++) {
            const element &#x3D; this.listadoEntradasHoy[i];
            this.serviciosExtras &#x3D; [];

            let nombreUser &#x3D; new HttpParams()
            .set(&#x27;opcion&#x27;, &#x27;6&#x27;)
            .set(&#x27;idUsuario&#x27;, element[&#x27;idUsuario&#x27;]);
            this.http.post &lt; any &gt; (&quot;http://34.206.59.221/dashboard.php&quot;, nombreUser).subscribe(data &#x3D;&gt; { // Obtener los datos del cliente
              if (data !&#x3D; null &amp;&amp; data !&#x3D; 0) {
                this.listadoEntradasHoy[i].alias_usuario &#x3D; data[0][&#x27;alias_usuario&#x27;];
                this.listadoEntradasHoy[i].nif &#x3D; data[0][&#x27;nif_usuario&#x27;];
                this.listadoEntradasHoy[i].nombre_usuario &#x3D; data[0][&#x27;nombre_usuario&#x27;];
                this.listadoEntradasHoy[i].telefono &#x3D; data[0][&#x27;telefono&#x27;];
                this.listadoEntradasHoy[i].email &#x3D; data[0][&#x27;email&#x27;];
                this.listadoEntradasHoy[i].fecha_entrada &#x3D; new Date(this.listadoEntradasHoy[i].fecha_entrada).toLocaleDateString(&quot;es-ES&quot;,{year: &quot;numeric&quot;, month:&quot;2-digit&quot;, day: &quot;2-digit&quot;});
                this.listadoEntradasHoy[i].fecha_salida &#x3D; new Date(this.listadoEntradasHoy[i].fecha_salida).toLocaleDateString(&quot;es-ES&quot;,{year: &quot;numeric&quot;, month:&quot;2-digit&quot;, day: &quot;2-digit&quot;});
              }
            });

            let idAlojamientoSalidasHoy &#x3D; new HttpParams()
            .set(&#x27;opcion&#x27;, &#x27;11&#x27;)
            .set(&#x27;idReserva&#x27;, element[&#x27;idReserva&#x27;]);
            this.http.post &lt; any &gt; (&quot;http://34.206.59.221/dashboard.php&quot;, idAlojamientoSalidasHoy).subscribe(data &#x3D;&gt; { // Obtener los datos de los alojamientos de la reserva
              if (data !&#x3D; null &amp;&amp; data !&#x3D; 0) {
                this.listadoEntradasHoy[i].tipo_alojamiento &#x3D; data[0][&#x27;nombre&#x27;];
                this.listadoEntradasHoy[i].idAlojamiento &#x3D; data[0][&#x27;idAlojamiento&#x27;];
                this.listadoEntradasHoy[i].precioAlojamiento &#x3D; data[0][&#x27;precio&#x27;];

                let numeAlojamiento &#x3D; new HttpParams()
                .set(&#x27;opcion&#x27;, &#x27;12&#x27;)
                .set(&#x27;idAlojamiento&#x27;, data[0][&#x27;idAlojamiento&#x27;]);
                this.http.post &lt; any &gt; (&quot;http://34.206.59.221/dashboard.php&quot;, numeAlojamiento).subscribe(data &#x3D;&gt; { // Obtener el número del alojamiento
                  if (data !&#x3D; null &amp;&amp; data !&#x3D; 0) {
                    this.listadoEntradasHoy[i].numeroAlojamiento &#x3D; data[0][&#x27;numeroAlojamiento&#x27;];
                    if(data[0][&#x27;tipo&#x27;] &#x3D;&#x3D; &#x27;bungalow&#x27;){
                      this.listadoEntradasHoy[i].habitaciones &#x3D; data[0][&#x27;habitaciones&#x27;];
                      this.listadoEntradasHoy[i].maximo_personas &#x3D; data[0][&#x27;maximo_personas&#x27;];
                    }else{
                      this.listadoEntradasHoy[i].dimension &#x3D; data[0][&#x27;dimension&#x27;];
                      switch (data[0][&#x27;sombra&#x27;]) { // Sombra de la parcela
                        case &#x27;0&#x27;:
                          this.listadoEntradasHoy[i].sombra &#x3D; &quot;Nada&quot;;
                          break;
                        case &#x27;1&#x27;:
                          this.listadoEntradasHoy[i].sombra &#x3D; &quot;Media&quot;;
                          break;
                        case &#x27;2&#x27;:
                          this.listadoEntradasHoy[i].sombra &#x3D; &quot;Bastante&quot;;
                          break;
                        case &#x27;3&#x27;:
                          this.listadoEntradasHoy[i].sombra &#x3D; &#x27;Mucha&#x27;;
                          break;
                        default:
                          this.listadoEntradasHoy[i].sombra &#x3D; &quot;Desconocido&quot;;
                          break;
                      }
                    }
                  }
                });
              }
            });

            let servicios &#x3D; new HttpParams()
            .set(&#x27;opcion&#x27;, &#x27;13&#x27;)
            .set(&#x27;idReserva&#x27;, element[&#x27;idReserva&#x27;]);
            this.http.post&lt;any&gt;(&quot;http://34.206.59.221/dashboard.php&quot;, servicios).subscribe(data &#x3D;&gt; { // Obtener los datos de los servicios contratados
              if (data !&#x3D; null &amp;&amp; data !&#x3D; 0) {
                for (let i &#x3D; 0; i &lt; data.length; i++) {
                  const element &#x3D; data[i];
                  delete element.idAlojamiento;
                  this.serviciosExtras.push(element);
                }
                this.serviciosExtras.idReserva &#x3D; element[&#x27;idReserva&#x27;];
              }
            });
          }
        }
      });

       /**
        * ? Acaba aquí
        */

    }else if (this.router.snapshot.url.length &gt; 1 &amp;&amp; this.router.snapshot.url[0].path &#x3D;&#x3D; &#x27;dashboard&#x27; &amp;&amp; this.router.snapshot.url[1].path &#x3D;&#x3D; &#x27;reservas&#x27;) {
      // Ver, buscar, editar o eliminar reservas

      /**
       * ? Empieza aquí
        */

      // Puestas las variables a false menos la correspondiente para mostrar su página
      this.dashboardInicio &#x3D; false;
      this.dashboardRevisarResenias &#x3D; false;
      this.dashboardSalidasHoy &#x3D; false;
      this.dashboardEntradasHoy &#x3D; false;
      this.dashboardReservas &#x3D; true;
      this.dashboardResenias &#x3D; false;
      this.dashboardUsuarios &#x3D; false;
      this.dashboardServicios &#x3D; false;
      this.dashboardAdmin &#x3D; false;
      this.dashboardAdminTemporadas &#x3D; false;
      this.dashboardAdminServicios &#x3D; false;

      this.atrasBusqueda();

      /**
       * ! Aquí va el código de RESERVAS, AQUÍ SE PODRÁ BUSCAR, VER, EDITAR O ELIMINAR RESERVAS
       */

      let reservas &#x3D; new HttpParams()
      .set(&#x27;opcion&#x27;, &#x27;4&#x27;);

      this.http.post&lt;any&gt;(&quot;http://34.206.59.221/dashboard.php&quot;, reservas).subscribe(data &#x3D;&gt; {
        if(data !&#x3D; null &amp;&amp; data !&#x3D; 0){
          this.reservasList &#x3D; data;
        }
      });

      /**
        * ? Acaba aquí
        */

    }else if (this.router.snapshot.url.length &gt; 1 &amp;&amp; this.router.snapshot.url[0].path &#x3D;&#x3D; &#x27;dashboard&#x27; &amp;&amp; this.router.snapshot.url[1].path &#x3D;&#x3D; &#x27;resenias&#x27;) {
      // Ver, buscar reseñas

      /**
       * ? Empieza aquí
       */

      // Puestas las variables a false menos la correspondiente para mostrar su página
      this.dashboardInicio &#x3D; false;
      this.dashboardRevisarResenias &#x3D; false;
      this.dashboardSalidasHoy &#x3D; false;
      this.dashboardEntradasHoy &#x3D; false;
      this.dashboardReservas &#x3D; false;
      this.dashboardResenias &#x3D; true;
      this.dashboardUsuarios &#x3D; false;
      this.dashboardServicios &#x3D; false;
      this.dashboardAdmin &#x3D; false;
      this.dashboardAdminTemporadas &#x3D; false;
      this.dashboardAdminServicios &#x3D; false;

      this.atrasBusqueda();

      /**
       * ! Aquí va el código de RESEÑAS, AQUÍ SE PODRÁ BUSCAR Y VER RESEÑAS
       */

      let reseniasBuscar &#x3D; new HttpParams()
      .set(&#x27;opcion&#x27;, &#x27;17&#x27;);

      this.http.post&lt;any&gt;(&quot;http://34.206.59.221/dashboard.php&quot;, reseniasBuscar).subscribe(data &#x3D;&gt; { // Últimas 10 reseñas
        if(data !&#x3D; null &amp;&amp; data !&#x3D; 0){
          this.reseniasList &#x3D; data;
          for (let k &#x3D; 0; k &lt; this.reseniasList.length; k++) {
            const element &#x3D; this.reseniasList[k];
            /**
             * TODO: ¿Mostrar también el nombre de los usuarios anónimos?
             * TODO: Sino se quiere mostrar...
             * if (element.anonimo !&#x3D; 0) { params y POST a la BD }
             */
            let usuarioResenia &#x3D; new HttpParams()
            .set(&#x27;opcion&#x27;, &#x27;6&#x27;)
            .set(&#x27;idUsuario&#x27;, element.idUsuario);

            this.http.post&lt;any&gt;(&quot;http://34.206.59.221/dashboard.php&quot;, usuarioResenia).subscribe(data &#x3D;&gt; { // Datos de usuario de cada reseña
              if(data !&#x3D; null &amp;&amp; data !&#x3D; 0) {
                this.reseniasList[k].nombre_usuario &#x3D; data[0][&#x27;nombre_usuario&#x27;];
                this.reseniasList[k].nif_usuario &#x3D; data[0][&#x27;nif_usuario&#x27;];
              }
            });
          }
        }
      });

       /**
        * ? Acaba aquí
        */

    }else if (this.router.snapshot.url.length &gt; 1 &amp;&amp; this.router.snapshot.url[0].path &#x3D;&#x3D; &#x27;dashboard&#x27; &amp;&amp; this.router.snapshot.url[1].path &#x3D;&#x3D; &#x27;usuarios&#x27;) {
      // Ver, buscar, eliminar usuarios

      /**
       * ? Empieza aquí
       */

      // Puestas las variables a false menos la correspondiente para mostrar su página
      this.dashboardInicio &#x3D; false;
      this.dashboardRevisarResenias &#x3D; false;
      this.dashboardSalidasHoy &#x3D; false;
      this.dashboardEntradasHoy &#x3D; false;
      this.dashboardReservas &#x3D; false;
      this.dashboardResenias &#x3D; false;
      this.dashboardUsuarios &#x3D; true;
      this.dashboardServicios &#x3D; false;
      this.dashboardAdmin &#x3D; false;
      this.dashboardAdminTemporadas &#x3D; false;
      this.dashboardAdminServicios &#x3D; false;

      this.atrasBusqueda();

      /**
       * ! Aquí va el código de USUARIOS, AQUÍ SE PODRÁ BUSCAR, VER, ELIMINAR USUARIOS, pero NO la contraseña, como en el Panel de Control
       */

      let usuariosDatos &#x3D; new HttpParams()
      .set(&#x27;opcion&#x27;, &#x27;20&#x27;);
      this.http.post&lt;any&gt;(&quot;http://34.206.59.221/dashboard.php&quot;, usuariosDatos).subscribe(data &#x3D;&gt; {
        if (data !&#x3D; null &amp;&amp; data !&#x3D; 0) {
          this.listadoUsuarios &#x3D; data;
        }
      });

       /**
        * ? Acaba aquí
        */

    }else if (this.router.snapshot.url.length &gt; 1 &amp;&amp; this.router.snapshot.url[0].path &#x3D;&#x3D; &#x27;dashboard&#x27; &amp;&amp; this.router.snapshot.url[1].path &#x3D;&#x3D; &#x27;servicios&#x27;) {
      // Aquí sólo se podrán VER los servicios

      /**
       * ? Empieza aquí
       */

      // Puestas las variables a false menos la correspondiente para mostrar su página
      this.dashboardInicio &#x3D; false;
      this.dashboardRevisarResenias &#x3D; false;
      this.dashboardSalidasHoy &#x3D; false;
      this.dashboardEntradasHoy &#x3D; false;
      this.dashboardReservas &#x3D; false;
      this.dashboardResenias &#x3D; false;
      this.dashboardUsuarios &#x3D; false;
      this.dashboardServicios &#x3D; true;
      this.dashboardAdmin &#x3D; false;
      this.dashboardAdminTemporadas &#x3D; false;
      this.dashboardAdminServicios &#x3D; false;

      this.atrasBusqueda();

      /**
       * ! Aquí va el código de SERVICIOS, AQUÍ SE PODRÁ BUSCAR, VER, Y AÑADIR SERVICIOS, pero NO eliminarlos
       */

      let todosServicios &#x3D; new HttpParams()
      .set(&#x27;opcion&#x27;, &#x27;22&#x27;);

      this.http.post&lt;any&gt;(&quot;http://34.206.59.221/dashboard.php&quot;, todosServicios).subscribe(data &#x3D;&gt; {
        if(data !&#x3D; null &amp;&amp; data !&#x3D; 0) {
          this.listadoServicios &#x3D; data;
          for (let i &#x3D; 0; i &lt; this.listadoServicios.length; i++) {
            const element &#x3D; this.listadoServicios[i];
            if(element[&#x27;idAlojamiento&#x27;] !&#x3D; null){

              let datosAlojamiento &#x3D; new HttpParams()
              .set(&#x27;opcion&#x27;, &#x27;12&#x27;)
              .set(&#x27;idAlojamiento&#x27;, element[&#x27;idAlojamiento&#x27;]);

              this.http.post&lt;any&gt;(&quot;http://34.206.59.221/dashboard.php&quot;, datosAlojamiento).subscribe(data &#x3D;&gt; {
                if(data !&#x3D; null &amp;&amp; data !&#x3D; 0) {
                  if (data[0][&#x27;tipo&#x27;] &#x3D;&#x3D; &#x27;parcela&#x27;) {
                    switch (data[0][&#x27;sombra&#x27;]) { // Sombra de la parcela
                      case &#x27;0&#x27;:
                        this.listadoServicios[i].sombra &#x3D; &quot;Nada&quot;;
                        break;
                      case &#x27;1&#x27;:
                        this.listadoServicios[i].sombra &#x3D; &quot;Media&quot;;
                        break;
                      case &#x27;2&#x27;:
                        this.listadoServicios[i].sombra &#x3D; &quot;Bastante&quot;;
                        break;
                      case &#x27;3&#x27;:
                        this.listadoServicios[i].sombra &#x3D; &#x27;Mucha&#x27;;
                        break;
                      default:
                        this.listadoServicios[i].sombra &#x3D; &quot;Desconocido&quot;;
                        break;
                    }
                    this.listadoServicios[i].dimension &#x3D; data[0][&#x27;dimension&#x27;];
                  }else{
                    this.listadoServicios[i].habitaciones &#x3D; data[0][&#x27;habitaciones&#x27;];
                    this.listadoServicios[i].maximo_personas &#x3D; data[0][&#x27;maximo_personas&#x27;];
                  }
                  this.listadoServicios[i].numeroAlojamiento &#x3D; data[0][&#x27;numeroAlojamiento&#x27;]
                }
              });
            }
          }
        }
      });

       /**
        * ? Acaba aquí
        */

    }else if (this.router.snapshot.url.length &gt; 1 &amp;&amp; this.router.snapshot.url[0].path &#x3D;&#x3D; &#x27;dashboard&#x27; &amp;&amp; this.router.snapshot.url[1].path &#x3D;&#x3D; &#x27;admin&#x27; &amp;&amp; this.router.snapshot.url[2].path &#x3D;&#x3D; &#x27;temporadas&#x27;) {
      // Aquí se podrá ver todas las temporadas ya que no son muchas, añadir, editar o eliminar alguna.

      /**
       * ? Empieza aquí
       */

      // Puestas las variables a false menos la correspondiente para mostrar su página
      this.dashboardInicio &#x3D; false;
      this.dashboardRevisarResenias &#x3D; false;
      this.dashboardSalidasHoy &#x3D; false;
      this.dashboardEntradasHoy &#x3D; false;
      this.dashboardReservas &#x3D; false;
      this.dashboardResenias &#x3D; false;
      this.dashboardUsuarios &#x3D; false;
      this.dashboardServicios &#x3D; false;
      this.dashboardAdmin &#x3D; true;
      this.dashboardAdminTemporadas &#x3D; true;
      this.dashboardAdminServicios &#x3D; false;

      /**
       * ! Aquí va el código de temporadas
       */

      let temporadas &#x3D; new HttpParams()
      .set(&#x27;opcion&#x27;, &#x27;23&#x27;);

      this.http.post&lt;any&gt;(&quot;http://34.206.59.221/dashboard.php&quot;, temporadas).subscribe(data &#x3D;&gt; {
        if(data !&#x3D; null &amp;&amp; data !&#x3D; 0) {
          this.listadoTemporadas &#x3D; data;
        }
      });

       /**
        * ? Acaba aquí
        */

    }else if (this.router.snapshot.url.length &gt; 1 &amp;&amp; this.router.snapshot.url[0].path &#x3D;&#x3D; &#x27;dashboard&#x27; &amp;&amp; this.router.snapshot.url[1].path &#x3D;&#x3D; &#x27;admin&#x27; &amp;&amp; this.router.snapshot.url[2].path &#x3D;&#x3D; &#x27;servicios&#x27;) {
      // Aquí sólo se podrán VER los servicios, añadir o editar servicios NUNCA ELIMINAR, YA QUE PUEDE DAR ERRORES EN LA PARTE DE RESERVA

      /**
       * ? Empieza aquí
       */

      // Puestas las variables a false menos la correspondiente para mostrar su página
      this.dashboardInicio &#x3D; false;
      this.dashboardRevisarResenias &#x3D; false;
      this.dashboardSalidasHoy &#x3D; false;
      this.dashboardEntradasHoy &#x3D; false;
      this.dashboardReservas &#x3D; false;
      this.dashboardResenias &#x3D; false;
      this.dashboardUsuarios &#x3D; false;
      this.dashboardServicios &#x3D; false;
      this.dashboardAdmin &#x3D; true;
      this.dashboardAdminTemporadas &#x3D; false;
      this.dashboardAdminServicios &#x3D; true;

      /**
       * ! Aquí va el código de servicios
       */

      let todosServicios &#x3D; new HttpParams()
      .set(&#x27;opcion&#x27;, &#x27;22&#x27;);

      this.http.post&lt;any&gt;(&quot;http://34.206.59.221/dashboard.php&quot;, todosServicios).subscribe(data &#x3D;&gt; {
        if(data !&#x3D; null &amp;&amp; data !&#x3D; 0) {
          this.listadoServicios &#x3D; data;
        }
      });

       /**
        * ? Acaba aquí
        */
    }
  }
}

/**
 * POPUP para confirmar eliminación de temporada
 */
@Component({
  selector: &#x27;confirmacion&#x27;,
  templateUrl: &#x27;dashboard.component.confirmacion.html&#x27;,
})
export class confirmacion {
  /**
   * Constructor de confirmacion
   * @param _popUp 
   * @param data 
   * @param http 
   */
  constructor(private _popUp: MatBottomSheetRef&lt;confirmacion&gt;, @Inject(MAT_BOTTOM_SHEET_DATA) public data: any, private http: HttpClient) {}

  /**
   * Función que confirma la eliminación de la temporada, temporada pasada por parámetro (e)
   * @param e 
   */
  confirmado(e) {
    this._popUp.dismiss();

    /**
     * Parámetros para la BD
     */
    let temporadas &#x3D; new HttpParams()
    .set(&#x27;opcion&#x27;, &#x27;25&#x27;)
    .set(&#x27;nombre&#x27;, e);

    this.http.post&lt;any&gt;(&quot;http://34.206.59.221/dashboard.php&quot;, temporadas).subscribe(data &#x3D;&gt; {
      if(data !&#x3D; null &amp;&amp; data !&#x3D; 0) {
        location.reload();
      }
    });
  }

  /**
   * Función para quitar el popup
   */
  cancelar() {
    this._popUp.dismiss();
  }
}

/**
 * POPUP para confirmar eliminación de reserva
 */
@Component({
  selector: &#x27;confirmacionReserva&#x27;,
  templateUrl: &#x27;dashboard.component.confirmacionReserva.html&#x27;,
})
export class confirmacionReserva {
  /**
   * Constructor de confirmacionReserva
   * @param _popUp 
   * @param data 
   * @param http 
   */
  constructor(private _popUp: MatBottomSheetRef&lt;confirmacionReserva&gt;, @Inject(MAT_BOTTOM_SHEET_DATA) public data: any, private http: HttpClient) {}

  /**
   * Función que confirma la eliminación de la reserva, reserva pasada por parámetro (e)
   * @param e 
   */
  confirmadoReserva(e) {
    this._popUp.dismiss();
    let reserva &#x3D; new HttpParams()
    .set(&#x27;opcion&#x27;, &#x27;28&#x27;)
    .set(&#x27;idReserva&#x27;, e);
    this.http.post&lt;any&gt;(&quot;http://34.206.59.221/dashboard.php&quot;, reserva).subscribe(data &#x3D;&gt; {
      if(data !&#x3D; null &amp;&amp; data !&#x3D; 0) {
        location.reload();
      }
    });
  }

  /**
   * Función para quitar el popup
   */
  cancelar() {
    this._popUp.dismiss();
  }
}

/**
 * POPUP para confirmar eliminación de servicio (alojamiento)
 */
@Component({
  selector: &#x27;confirmacionServicio&#x27;,
  templateUrl: &#x27;dashboard.component.confirmacionServicio.html&#x27;,
})
export class confirmacionServicio {
  /**
   * Constructor confirmacionServicio
   * @param _popUp 
   * @param data 
   * @param http 
   */
  constructor(private _popUp: MatBottomSheetRef&lt;confirmacionServicio&gt;, @Inject(MAT_BOTTOM_SHEET_DATA) public data: any, private http: HttpClient) {}

  /**
   * Función que confirma la eliminación del servicio (alojamiento), servicio pasado por parámetro (e)
   * @param e 
   */
  confirmadoServicio(e) {
    this._popUp.dismiss();
    let alojamiento &#x3D; new HttpParams()
    .set(&#x27;opcion&#x27;, &#x27;30&#x27;)
    .set(&#x27;idAlojamiento&#x27;, e);

    this.http.post&lt;any&gt;(&quot;http://34.206.59.221/dashboard.php&quot;, alojamiento).subscribe(data &#x3D;&gt; {
      if(data !&#x3D; null &amp;&amp; data !&#x3D; 0) {
        location.reload();
      }
    });
  }

  /**
   * Función para quitar el popup
   */
  cancelar() {
    this._popUp.dismiss();
  }
}</code></pre>
    </div>

    <div class="tab-pane fade " id="c-templateData">
        <pre class="line-numbers"><code class="language-html">&lt;p class&#x3D;&quot;text-center&quot;&gt;¿Seguro que desea borrar el alojamiento con &lt;strong&gt;ID {{data.servicio.idAlojamiento}}&lt;/strong&gt;, es un/a &lt;strong&gt;{{data.servicio.nombre}}&lt;/strong&gt; con &lt;strong&gt;precio {{data.servicio.precio}}&lt;/strong&gt;?&lt;/p&gt;
&lt;button mat-raised-button color&#x3D;&quot;accent&quot; (click)&#x3D;&quot;confirmadoServicio(data.servicio.idAlojamiento)&quot;&gt;Sí&lt;/button&gt;
&lt;button mat-raised-button color&#x3D;&quot;accent&quot; class&#x3D;&quot;float-right&quot; (click)&#x3D;&quot;cancelar()&quot;&gt;Cancelar&lt;/button&gt;</code></pre>
    </div>


    <div class="tab-pane fade " id="c-tree">
        <div id="tree-container"></div>
        <div class="tree-legend">
            <div class="title">
                <b>Legend</b>
            </div>
            <div>
                <div class="color htmlelement"></div><span>Html element</span>
            </div>
            <div>
                <div class="color component"></div><span>Component</span>
            </div>
            <div>
                <div class="color directive"></div><span>Html element with directive</span>
            </div>
        </div>
    </div>

    
</div>

<script src="../js/libs/vis.min.js"></script>
<script src="../js/libs/htmlparser.js"></script>
<script src="../js/libs/deep-iterator.js"></script>
<script>
        var COMPONENT_TEMPLATE = '<div><p class="text-center">¿Seguro que desea borrar el alojamiento con <strong>ID {{data.servicio.idAlojamiento}}</strong>, es un/a <strong>{{data.servicio.nombre}}</strong> con <strong>precio {{data.servicio.precio}}</strong>?</p><button mat-raised-button color="accent" (click)="confirmadoServicio(data.servicio.idAlojamiento)">Sí</button><button mat-raised-button color="accent" class="float-right" (click)="cancelar()">Cancelar</button></div>'
    var COMPONENTS = [{'name': 'AboutComponent', 'selector': 'app-about'},{'name': 'AlojamientoComponent', 'selector': 'app-alojamiento'},{'name': 'AppComponent', 'selector': 'app-root'},{'name': 'confirmacion', 'selector': 'confirmacion'},{'name': 'confirmacionReserva', 'selector': 'confirmacionReserva'},{'name': 'confirmacionServicio', 'selector': 'confirmacionServicio'},{'name': 'ContactComponent', 'selector': 'app-contact'},{'name': 'DashboardComponent', 'selector': 'app-dashboard'},{'name': 'HomeComponent', 'selector': 'app-home'},{'name': 'LoginComponent', 'selector': 'app-login'},{'name': 'NoencontradoComponent', 'selector': 'app-noencontrado'},{'name': 'PaneldeControlComponent', 'selector': 'app-panelde-control'},{'name': 'RegistrarComponent', 'selector': 'app-registrar'},{'name': 'ReservasComponent', 'selector': 'app-reservas'},{'name': 'ReservasLoginComponent', 'selector': 'app-reservas-login'},{'name': 'ReservasRegistrarComponent', 'selector': 'app-reservas-registrar'},{'name': 'UsuarioComponent', 'selector': 'app-usuario'}];
    var DIRECTIVES = [];
    var ACTUAL_COMPONENT = {'name': 'confirmacionServicio'};
</script>
<script src="../js/tree.js"></script>










                   




                   </div><div class="search-results">
    <div class="has-results">
        <h1 class="search-results-title"><span class='search-results-count'></span> result-matching "<span class='search-query'></span>"</h1>
        <ul class="search-results-list"></ul>
    </div>
    <div class="no-results">
        <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
    </div>
</div>
</div>
               <!-- END CONTENT -->
           </div>
       </div>

       <script>
            var COMPODOC_CURRENT_PAGE_DEPTH = 1;
            var COMPODOC_CURRENT_PAGE_CONTEXT = 'component';
            var COMPODOC_CURRENT_PAGE_URL = 'confirmacionServicio.html';
            var MAX_SEARCH_RESULTS = 15;
       </script>

       <script src="../js/libs/custom-elements.min.js"></script>
       <script src="../js/libs/lit-html.js"></script>
       <!-- Required to polyfill modern browsers as code is ES5 for IE... -->
       <script src="../js/libs/custom-elements-es5-adapter.js" charset="utf-8" defer></script>
       <script src="../js/menu-wc.js" defer></script>

       <script src="../js/libs/bootstrap-native.js"></script>

       <script src="../js/libs/es6-shim.min.js"></script>
       <script src="../js/libs/EventDispatcher.js"></script>
       <script src="../js/libs/promise.min.js"></script>
       <script src="../js/libs/zepto.min.js"></script>

       <script src="../js/compodoc.js"></script>

       <script src="../js/tabs.js"></script>
       <script src="../js/menu.js"></script>
       <script src="../js/libs/clipboard.min.js"></script>
       <script src="../js/libs/prism.js"></script>
       <script src="../js/sourceCode.js"></script>
          <script src="../js/search/search.js"></script>
          <script src="../js/search/lunr.min.js"></script>
          <script src="../js/search/search-lunr.js"></script>
          <script src="../js/search/search_index.js"></script>
       <script src="../js/lazy-load-graphs.js"></script>


    </body>
</html>
